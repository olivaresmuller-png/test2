import{c as Xe,t as Qe,a as hs,b as ke,s as Ts,r as d,u as Vs,j as e,D as Le,d as Pe,B as E,e as Re,f as Fe,g as $e,h as et,U as st,T as us,i as tt,k as j,S as Je,l as k,C as Gs,G as fs,P as at,m as Ws,n as _s,o as Us,p as nt,q as Os,v as rt,w as fe,x as ye,I as As,y as Is,z as te,A as Ne,E as lt,F as it,H as ls,J as is,K as ct,L as dt,M as ot}from"./index-DFiRHIs1.js";import{F as Bs,r as xt,u as mt,l as ht,S as ut,U as Ls}from"./xlsx-CY811sEw.js";import{S as De}from"./scroll-area-Db5v6lLm.js";import{B as O,L as ve}from"./label-BmvUlmpa.js";import{C as Ps,a as Be,s as ft}from"./setWeek-C11TKXL0.js";import{S as ne,a as re,b as le,c as we,d as Se,e as M,f as de}from"./select-Bupf49YT.js";import{T as pt,a as gt,b as cs}from"./tabs-D2as2i6A.js";import{P as jt,T as ds,a as os,b as Ce,c as V,d as xs,e as G}from"./table-CT4JN8c9.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],yt=Xe("coffee",bt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],vt=Xe("heart",Nt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Rs=Xe("loader-circle",wt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ct=Xe("shield",St);function Hs(n,r){const i=Qe(n);if(isNaN(r))return hs(n,NaN);if(!r)return i;const u=i.getDate(),b=hs(n,i.getTime());b.setMonth(i.getMonth()+r+1,0);const x=b.getDate();return u>=x?b:(i.setFullYear(b.getFullYear(),b.getMonth(),u),i)}function zs(n,r){const i=r*7;return ke(n,i)}function Mt(n){return hs(n,Date.now())}function kt(n,r){const i=Ts(n),u=Ts(r);return+i==+u}function Dt(n){const r=Qe(n),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}function Et(n){const r=Qe(n);return r.setDate(1),r.setHours(0,0,0,0),r}function ps(n){return Qe(n).getDay()}function Ee(n){return kt(n,Mt(n))}function Tt(n,r){return Hs(n,-1)}function Ot(n,r){return zs(n,-1)}const Fs={jan:0,feb:1,mar:2,mär:2,apr:3,may:4,mai:4,jun:5,jul:6,aug:7,sep:8,oct:9,okt:9,nov:10,dec:11,dez:11};function At(){const[n,r]=d.useState(!1),[i,u]=d.useState(!1),[b,x]=d.useState(!1),[o,t]=d.useState(null),[T,P]=d.useState(null),R=d.useRef(null),{employees:pe,updateAssignment:$}=Vs(),xe=y=>{const N=y.join(" ").toLowerCase();for(const[J,A]of Object.entries(Fs))if(N.includes(J))return A;return new Date().getMonth()},js=async y=>{u(!0),P(null),t(null);try{const N=await y.arrayBuffer(),J=xt(N,{type:"array"}),A=J.SheetNames[0],Ge=J.Sheets[A],I=mt.sheet_to_json(Ge,{header:1,defval:""});if(I.length<8)throw new Error("Excel file does not have enough rows. Expected at least 8 rows.");const We=I[4]||[],X=I[5]||[],ys=I[6]||[],ie=xe(We);let Oe=new Date().getFullYear();for(let D=0;D<Math.min(5,I.length);D++){const Q=I[D].join(" ").match(/20\d{2}/);if(Q){Oe=parseInt(Q[0]);break}}const ge=[];for(let D=3;D<X.length;D++){const H=X[D];if(!H)continue;const Q=String(H).trim(),g=parseInt(Q,10);if(isNaN(g)||g<1||g>31)continue;let v=ie;const z=String(We[D]||"").toLowerCase();for(const[ce,Ue]of Object.entries(Fs))if(z.includes(ce)){v=Ue;break}let W=Oe;v<ie&&ie>=10&&v<=2&&(W=Oe+1);const K=new Date(W,v,g);isNaN(K.getTime())||ge.push({col:D,dateStr:j(K,"yyyy-MM-dd")})}if(ge.length===0)throw new Error("Could not find valid dates in row 6. Make sure day numbers (1-31) are in row 6 starting from column D.");const me=[],_e=new Set,es=7;for(let D=es;D<I.length;D++){const H=I[D];if(!H||H.length<4)continue;const Q=H[2];if(!Q)continue;const g=String(Q).trim().toUpperCase();if(g.length<2||g.length>6||/\d/.test(g)||g.includes("(")||g.includes("ENGINEER")||g.includes("MANAGER")||g.includes("SUPERVISOR")||g.includes("PRODUCTION")||g.includes("HEAD")||g.includes("TMB")||g.includes("EMPLOYEE")||g.includes("SENIOR")||g.includes("EXTERNAL")||g.includes("CODE")||g.includes("3/4"))continue;if(!pe.find(z=>z.initials.toUpperCase()===g)){g.match(/^[A-Z]{3,5}$/)&&_e.add(g);continue}for(const z of ge){const W=H[z.col];if(!W)continue;const K=String(W).trim();!K||K==="-"||K===""||me.push({employeeInitials:g,date:z.dateStr,shiftCode:K})}}const je=ge.map(D=>D.dateStr).sort(),ss=je.length>0?{start:je[0],end:je[je.length-1]}:null;t({total:me.length,matched:new Set(me.map(D=>D.employeeInitials)).size,unmatched:Array.from(_e),shifts:me,dateRange:ss})}catch(N){P(N instanceof Error?N.message:"Failed to parse Excel file")}finally{u(!1)}},bs=async()=>{if(o){x(!0);try{for(const y of o.shifts){const N=pe.find(J=>J.initials.toUpperCase()===y.employeeInitials);N&&$(y.date,N.id,y.shiftCode)}r(!1),t(null)}finally{x(!1)}}},Ve=y=>{const N=y.target.files?.[0];N&&js(N),R.current&&(R.current.value="")},Te=()=>{r(!1),t(null),P(null)};return e.jsxs(Le,{open:n,onOpenChange:y=>y?r(!0):Te(),children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"gap-2","data-testid":"button-import-excel",children:[e.jsx(Bs,{className:"w-4 h-4"}),"Import Excel"]})}),e.jsxs(Re,{className:"max-w-lg",children:[e.jsxs(Fe,{children:[e.jsxs($e,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5"}),"Import Shift Schedule from Excel"]}),e.jsx(et,{children:"Upload Excel file with shifts. Format: Row 5 = Month, Row 6 = Day, Row 7 = Weekday, Column C = Employee code, Column D+ = Shifts"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{ref:R,type:"file",accept:".xlsx,.xls",onChange:Ve,className:"hidden"}),e.jsx(E,{onClick:()=>R.current?.click(),disabled:i,className:"w-full gap-2",variant:"outline",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"w-4 h-4 animate-spin"}),"Parsing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4"}),"Select Excel File"]})}),T&&e.jsxs("div",{className:"p-3 bg-destructive/10 text-destructive rounded-lg flex items-start gap-2",children:[e.jsx(us,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:T})]}),o&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Ps,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"File parsed successfully"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Shifts found:"}),e.jsx("span",{className:"ml-2 font-medium",children:o.total})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Employees matched:"}),e.jsx("span",{className:"ml-2 font-medium",children:o.matched})]})]}),o.dateRange&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date range:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[o.dateRange.start," to ",o.dateRange.end]})]})]}),o.unmatched.length>0&&e.jsxs("div",{className:"p-3 bg-yellow-500/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-2",children:[e.jsx(us,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["Unmatched employees (",o.unmatched.length,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.unmatched.slice(0,10).map(y=>e.jsx(O,{variant:"outline",className:"text-xs",children:y},y)),o.unmatched.length>10&&e.jsxs(O,{variant:"outline",className:"text-xs",children:["+",o.unmatched.length-10," more"]})]})]}),o.shifts.length>0&&e.jsx(De,{className:"h-[150px] border rounded-lg",children:e.jsxs("div",{className:"p-2 space-y-1",children:[o.shifts.slice(0,50).map((y,N)=>e.jsxs("div",{className:"flex justify-between text-xs px-2 py-1 hover:bg-muted/50 rounded",children:[e.jsx("span",{className:"font-mono",children:y.employeeInitials}),e.jsx("span",{className:"text-muted-foreground",children:y.date}),e.jsx(O,{variant:"secondary",className:"text-xs",children:y.shiftCode})]},N)),o.shifts.length>50&&e.jsxs("div",{className:"text-center text-xs text-muted-foreground py-2",children:["... and ",o.shifts.length-50," more shifts"]})]})})]})]}),e.jsxs(tt,{children:[e.jsx(E,{variant:"outline",onClick:Te,children:"Cancel"}),e.jsx(E,{onClick:bs,disabled:!o||o.total===0||b,className:"gap-2",children:b?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4"}),"Import ",o?.total||0," Shifts"]})})]})]})]})}const oe=d.memo(function({code:r,size:i="md",showLabel:u=!1}){const b=Je.find(t=>t.code===r),x=()=>r==="Ea"||r==="e"?"shift-early":r==="La"||r==="AL"?"shift-late":r==="Ae"||r==="eA"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":r==="V"?"shift-vacation":r==="T"||r==="TD"?"shift-training":r==="S"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"shift-off",o={xs:"text-[8px] px-1 py-0 min-w-[20px]",sm:"text-[10px] px-1.5 py-0.5 min-w-[28px]",md:"text-xs px-2 py-1 min-w-[36px]",lg:"text-sm px-3 py-1.5 min-w-[48px]"};return e.jsxs("span",{"data-testid":`badge-shift-${r}`,className:k("inline-flex items-center justify-center font-mono font-semibold rounded-md transition-colors",x(),o[i]),children:[r,u&&b&&e.jsx("span",{className:"ml-1.5 font-sans font-normal opacity-75",children:b.label})]})}),It=["Ea","La","M","Ae","AL","e","eA","l","LA","TD","HO","t4"],Bt=["FT","BT","ET","FD","SI","SE","Sn","TR"],Lt=["V","PW","PC","PB","PD","PG","PI","PH","PM","PL","UL","KO","KB","FL"],Pt=["S","IC","IW","AC","AW"],Rt=["MC","MW"],Ft=["-","OFF","T","?"],Me={Ea:"06:15–15:09 • TMB Earlyshift",La:"14:00–22:54 • TMB Lateshift",M:"08:00–17:20 • TMB Mid-shift",Ae:"05:45–14:39 • TMB PL STV Early",AL:"13:30–22:24 • TMB PL STV Late",e:"TMB Earlyshift PM",eA:"05:45–14:39 • TMB PL Early",l:"TMB Lateshift PM",LA:"13:30–22:24 • TMB PL Late",TD:"Part Time Day shift",t4:"Classroom Training 4H",FT:"Feiertag / Public CH",BT:"Business Trip",SI:"School internal",SE:"School external",Sn:"School night",V:"Vacation",PW:"Wedding (own) - 3 Days",PB:"Birth - 2 Days",PD:"Death (Spouse/Child/Parents) - 3 Days",UL:"Unpaid Leave",KO:"Kompensation ex Overtime",KB:"Kompensation ex Timebonus",S:"Sick with Certificate",IC:"Sick with Certificate",IW:"Sick without Certificate",IB:"Baby Leave with Certificate",IM:"Baby Leave",IN:"Nurse of close relatives",AC:"Accident with Certificate",AW:"Accident without Certificate",MC:"Military with EO",MW:"Military without EO",FL:"Kompensation ex Flextime",HO:"Home Office",ET:"Educational Trip",FD:"Flight Duty",OF:"Office Duty",PR:"Projects",PC:"Wedding (Child) - 1 Day",PG:"Death (In-Law/Grandp.) - 2 Days",PI:"Death (In-Law/Sibling) - 1 Day",PH:"Moving HB >100km - 2 Days",PM:"Moving - 1 Day",PL:"Paid Leave",PK:"Baby Leave (Mutterschaftsurl)",ST:"Study Time",TO:"Time out",TR:"08:00–17:00 • Training","-":"Off day",OFF:"Scheduled off duty",T:"Training day","?":"Unassigned / TBD"},gs=d.memo(function({value:r,onValueChange:i,compact:u,"data-testid":b}){const x=Je.find(t=>t.code===r),o=t=>Je.filter(T=>t.includes(T.code));return e.jsxs(ne,{value:r,onValueChange:t=>i(t),children:[e.jsxs(re,{className:k("gap-2 border-2 hover:border-primary/50 transition-colors",u?"w-auto h-8 px-2":"w-auto"),"data-testid":b,children:[e.jsx(oe,{code:r,size:"sm"}),!u&&x&&x.hours>0&&e.jsxs("span",{className:"text-xs text-muted-foreground font-medium",children:[x.hours,"h"]})]}),e.jsxs(le,{className:"w-[340px] max-h-[450px]",children:[e.jsxs(we,{children:[e.jsxs(Se,{className:"flex items-center gap-2 text-primary font-semibold py-2",children:[e.jsx(Gs,{className:"w-4 h-4"}),"Work Shifts"]}),o(It).map(t=>e.jsx(M,{value:t.code,className:"py-2.5 cursor-pointer hover:bg-primary/5",children:e.jsxs("div",{className:"flex items-start gap-3 w-full",children:[e.jsx(oe,{code:t.code,size:"sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.label}),e.jsxs("span",{className:"text-xs text-emerald-600 font-bold bg-emerald-50 px-1.5 py-0.5 rounded ml-2",children:[t.hours,"h"]})]}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5 leading-tight",children:Me[t.code]})]})]})},t.code))]}),e.jsx("div",{className:"h-px bg-border my-2"}),e.jsxs(we,{children:[e.jsxs(Se,{className:"flex items-center gap-2 text-blue-600 font-semibold py-2",children:[e.jsx(fs,{className:"w-4 h-4"}),"Training & Business"]}),o(Bt).map(t=>e.jsx(M,{value:t.code,className:"py-2.5 cursor-pointer hover:bg-blue-50",children:e.jsxs("div",{className:"flex items-start gap-3 w-full",children:[e.jsx(oe,{code:t.code,size:"sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.label}),t.hours>0&&e.jsxs("span",{className:"text-xs text-blue-600 font-bold bg-blue-50 px-1.5 py-0.5 rounded ml-2",children:[t.hours,"h"]})]}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5 leading-tight",children:Me[t.code]})]})]})},t.code))]}),e.jsx("div",{className:"h-px bg-border my-2"}),e.jsxs(we,{children:[e.jsxs(Se,{className:"flex items-center gap-2 text-amber-600 font-semibold py-2",children:[e.jsx(at,{className:"w-4 h-4"}),"Leave & Time Off"]}),o(Lt).map(t=>e.jsx(M,{value:t.code,className:"py-2.5 cursor-pointer hover:bg-amber-50",children:e.jsxs("div",{className:"flex items-start gap-3 w-full",children:[e.jsx(oe,{code:t.code,size:"sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.label}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5 leading-tight",children:Me[t.code]})]})]})},t.code))]}),e.jsx("div",{className:"h-px bg-border my-2"}),e.jsxs(we,{children:[e.jsxs(Se,{className:"flex items-center gap-2 text-rose-600 font-semibold py-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Sick Leave"]}),o(Pt).map(t=>e.jsx(M,{value:t.code,className:"py-2.5 cursor-pointer hover:bg-rose-50",children:e.jsxs("div",{className:"flex items-start gap-3 w-full",children:[e.jsx(oe,{code:t.code,size:"sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.label}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5 leading-tight",children:Me[t.code]})]})]})},t.code))]}),e.jsx("div",{className:"h-px bg-border my-2"}),e.jsxs(we,{children:[e.jsxs(Se,{className:"flex items-center gap-2 text-indigo-600 font-semibold py-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Military Service"]}),o(Rt).map(t=>e.jsx(M,{value:t.code,className:"py-2.5 cursor-pointer hover:bg-indigo-50",children:e.jsxs("div",{className:"flex items-start gap-3 w-full",children:[e.jsx(oe,{code:t.code,size:"sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.label}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5 leading-tight",children:Me[t.code]})]})]})},t.code))]}),e.jsx("div",{className:"h-px bg-border my-2"}),e.jsxs(we,{children:[e.jsxs(Se,{className:"flex items-center gap-2 text-slate-500 font-semibold py-2",children:[e.jsx(yt,{className:"w-4 h-4"}),"Off Duty"]}),o(Ft).map(t=>e.jsx(M,{value:t.code,className:"py-2.5 cursor-pointer hover:bg-slate-50",children:e.jsxs("div",{className:"flex items-start gap-3 w-full",children:[e.jsx(oe,{code:t.code,size:"sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.label}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5 leading-tight",children:Me[t.code]})]})]})},t.code))]})]})]})}),$t=d.memo(function({employees:r,weekDates:i,getAssignment:u,onShiftChange:b}){return e.jsxs("div",{className:"min-w-[800px]",children:[e.jsxs("div",{className:"flex border-b border-border bg-muted/20 sticky top-0 z-20",children:[e.jsx("div",{className:"text-left p-3 font-medium text-muted-foreground sticky left-0 bg-card z-10 min-w-[200px] w-[200px] flex-shrink-0",children:"Employee"}),i.map(x=>e.jsxs("div",{className:k("p-3 text-center min-w-[80px] flex-1",Ee(new Date(x))&&"bg-primary/5"),children:[e.jsx("div",{className:"font-medium",children:j(new Date(x),"EEE")}),e.jsx("div",{className:k("text-sm",Ee(new Date(x))?"text-primary font-semibold":"text-muted-foreground"),children:j(new Date(x),"d")})]},x))]}),e.jsx("div",{className:"max-h-[calc(100vh-280px)] overflow-y-auto",children:r.map(x=>e.jsxs("div",{className:k("flex border-b border-border/50",x.role==="PM"&&"bg-amber-50 dark:bg-amber-950/30",x.role==="PS"&&"bg-emerald-50 dark:bg-emerald-950/30",x.role==="SrEng"&&"bg-lime-50 dark:bg-lime-950/20"),children:[e.jsx("div",{className:k("p-3 sticky left-0 z-10 border-r border-border/50 min-w-[200px] w-[200px] flex-shrink-0 flex items-center",x.role==="PM"?"bg-amber-50 dark:bg-amber-950/30":x.role==="PS"?"bg-emerald-50 dark:bg-emerald-950/30":x.role==="SrEng"?"bg-lime-50 dark:bg-lime-950/20":"bg-card"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-xs font-mono font-bold text-primary",children:x.initials}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:x.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.department.replace("S/","")})]})]})}),i.map(o=>{const t=u(o,x.id)||"-";return e.jsxs("div",{className:k("p-2 flex-1 flex items-center justify-center min-w-[80px]",Ee(new Date(o))&&"bg-primary/5"),children:[e.jsx("span",{className:"print-only font-mono text-xs font-medium",children:t}),e.jsx("span",{className:"screen-only",children:e.jsx(gs,{value:t,onValueChange:T=>b(o,x.id,T),compact:!0,"data-testid":`select-shift-${x.id}-${o}`})})]},o)})]},x.id))})]})}),Vt=d.memo(function({employees:r,monthDays:i,getAssignment:u,onShiftChange:b}){const[x,o]=d.useState(null);return e.jsxs("div",{className:"min-w-[1200px]",children:[e.jsxs("div",{className:"flex border-b border-border bg-muted/20 sticky top-0 z-20",children:[e.jsx("div",{className:"text-left p-2 font-medium text-muted-foreground sticky left-0 bg-card z-10 min-w-[180px] w-[180px] flex-shrink-0 text-xs",children:"Employee"}),i.map(t=>{const T=j(t,"yyyy-MM-dd"),P=[0,6].includes(ps(t));return e.jsxs("div",{className:k("p-1 text-center min-w-[32px] flex-1 text-xs",P&&"bg-muted/50",Ee(t)&&"bg-primary/10"),children:[e.jsx("div",{className:"font-medium",children:j(t,"EEE")[0]}),e.jsx("div",{className:k("text-[10px]",Ee(t)?"text-primary font-bold":"text-muted-foreground"),children:j(t,"d")})]},T)})]}),e.jsx("div",{className:"max-h-[calc(100vh-280px)] overflow-y-auto",children:r.map(t=>e.jsxs("div",{className:k("flex border-b border-border/50",t.role==="PM"&&"bg-amber-50/50",t.role==="PS"&&"bg-emerald-50/50",t.role==="SrEng"&&"bg-lime-50/50"),children:[e.jsx("div",{className:k("p-2 sticky left-0 z-10 border-r border-border/50 text-xs min-w-[180px] w-[180px] flex-shrink-0 flex items-center",t.role==="PM"?"bg-amber-50":t.role==="PS"?"bg-emerald-50":t.role==="SrEng"?"bg-lime-50":"bg-card"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-bold text-primary text-[10px]",children:t.initials}),e.jsx("span",{className:"font-medium truncate max-w-[120px]",children:t.name.split(",")[0]})]})}),i.map(T=>{const P=j(T,"yyyy-MM-dd"),R=u(P,t.id)||"-",pe=[0,6].includes(ps(T)),$=`${t.id}-${P}`;return e.jsxs("div",{className:k("p-0.5 flex-1 flex items-center justify-center min-w-[32px]",pe&&"bg-muted/30",Ee(T)&&"bg-primary/5"),children:[e.jsx("span",{className:"print-only font-mono text-[9px] font-medium",children:R}),e.jsx("span",{className:"screen-only",children:e.jsxs(Ws,{open:x===$,onOpenChange:xe=>o(xe?$:null),children:[e.jsx(_s,{asChild:!0,children:e.jsx("button",{className:"cursor-pointer hover:scale-110 transition-transform",children:e.jsx(oe,{code:R,size:"xs"})})}),e.jsx(Us,{className:"w-48 p-2",align:"center",children:e.jsx(gs,{value:R,onValueChange:xe=>{b(P,t.id,xe),o(null)},"data-testid":`select-shift-month-${t.id}-${P}`})})]})})]},P)})]},t.id))})]})}),$s=216,ae=216,q=6,Z=2,ms=30,Ze=35;function Zt(){const{employees:n,assignments:r,selectedDate:i,setSelectedDate:u,updateAssignment:b,getAssignment:x,getWeekDates:o,importMetadata:t}=Vs(),[T,P]=d.useState("week"),[R,pe]=d.useState("all"),[$,xe]=d.useState(i),[js,bs]=d.useState(!1),[Ve,Te]=d.useState(""),[y]=ht(Ve,150),[N,J]=d.useState(null),[A,Ge]=d.useState(1),[I,We]=d.useState("V"),[X,ys]=d.useState(i),[ie,Oe]=d.useState(7),[ge,me]=d.useState(!1),[_e,es]=d.useState(!1),[je,ss]=d.useState(!1);j($,"yyyy-MM-dd");const D=[{code:"V",label:"Vacation (V)"},{code:"-",label:"Day Off (-)"},{code:"S",label:"Sick (S)"},{code:"KO",label:"Komp. Overtime (KO)"},{code:"FL",label:"Komp. Flextime (FL)"},{code:"UL",label:"Unpaid Leave (UL)"},{code:"MC",label:"Military (MC)"},{code:"TR",label:"Training (TR)"}],H=s=>{N&&b(s,N,I)},Q=()=>{!N||!f.results||f.results.forEach(s=>{s.result.canGrant&&b(s.dateStr,N,I)})},g=d.useMemo(()=>{if(!y.trim())return[];const s=y.toLowerCase().trim();return n.filter(a=>a.name.toLowerCase().includes(s)||a.initials.toLowerCase().includes(s)).slice(0,8)},[n,y]),v=d.useMemo(()=>N?n.find(s=>s.id===N):null,[n,N]),z=d.useMemo(()=>{const s=["THRU","MELM","YCCR","TIMJ","HUAB","YYRJ","MECU","LECN","LCLE","HUDM","ARUZ","KRZE","LSIE","AAUL","WINY","SOER","ERIZ","BHAE","DALL","GBRU","LUPR","RREN","GNET","TOKR","COSM","FILM","PAAO","LUCP","MF","NATS","MZIM","TIML","OLCR","WEZE","JAWE","KRAF","RUAC","SAEF","LABB","RDAR","ARNG","MCOS","THNA","JUTI","GERO","MURB","BOGO","EGGL","RULO","RPAS","DMIA","ENRL","ATET_1","BOEO","DEOM","PKRI"];return[...R==="all"?n:n.filter(l=>l.department===R)].sort((l,S)=>{const _=s.indexOf(l.initials),U=s.indexOf(S.initials);return _===-1&&U===-1?0:_===-1?1:U===-1?-1:_-U})},[n,R]),W=d.useMemo(()=>o(i),[i,o]),K=d.useMemo(()=>{const s=Et(i),a=Dt(i);return nt({start:s,end:a})},[i]),ce=j(i,"yyyy-MM-dd"),Ue=d.useMemo(()=>Os(n,r,ce),[n,r,ce]);d.useMemo(()=>rt(n,r,W),[n,r,W]);const Ae=d.useMemo(()=>{const s=ce,a=r.filter(B=>B.date===s&&n.some(ns=>String(ns.id)===String(B.employeeId))),l=a.filter(B=>fe(B.shiftCode)).length,S=a.filter(B=>["Ea","e","Ae"].includes(B.shiftCode)).length,_=a.filter(B=>["La","l","LA","AL"].includes(B.shiftCode)).length,U=n.length-l;return{onDuty:l,earlyShifts:S,lateShifts:_,offDuty:U}},[r,ce,n]),ts=[{code:"TR",label:"Training",color:"bg-purple-500"},{code:"SI",label:"School Internal",color:"bg-blue-500"},{code:"SE",label:"School External",color:"bg-indigo-500"},{code:"Sn",label:"School Night",color:"bg-violet-500"},{code:"ET",label:"Educational Trip",color:"bg-cyan-500"},{code:"T",label:"Training (Off)",color:"bg-purple-400"}],Ns=d.useMemo(()=>{const s=[];for(let a=0;a<ie;a++)s.push(j(ke(X,a),"yyyy-MM-dd"));return s},[X,ie]),be=d.useMemo(()=>{const s=ts.map(S=>S.code);return r.filter(S=>Ns.includes(S.date)&&s.includes(S.shiftCode)).map(S=>{const _=n.find(B=>B.id===S.employeeId),U=ts.find(B=>B.code===S.shiftCode);return _?{..._,educationType:S.shiftCode,educationLabel:U?.label,educationColor:U?.color,educationDate:S.date}:null}).filter(Boolean)},[r,n,Ns]),He=d.useMemo(()=>{const s=r.filter(l=>l.shiftCode==="FT"),a={};return s.forEach(l=>{a[l.employeeId]||(a[l.employeeId]={dates:[]}),a[l.employeeId].dates.push(l.date)}),n.map(l=>({...l,ftCount:a[l.id]?.dates.length||0,ftDates:(a[l.id]?.dates||[]).sort()})).sort((l,S)=>S.ftCount-l.ftCount)},[r,n]),ze=d.useMemo(()=>{const s=r.filter(l=>l.shiftCode==="V"),a={};return s.forEach(l=>{a[l.employeeId]||(a[l.employeeId]={dates:[]}),a[l.employeeId].dates.push(l.date)}),n.map(l=>({...l,vCount:a[l.id]?.dates.length||0,vDates:(a[l.id]?.dates||[]).sort()})).sort((l,S)=>S.vCount-l.vCount)},[r,n]),ee=s=>{const a=s.skills.map(l=>l.license).filter(Boolean);return a.includes("B1/2")?"B1-2":a.includes("B1")?"B1":a.includes("B2")?"B2":a.includes("A")?"Cat A":a.includes("C")?"C":"None"},f=d.useMemo(()=>{const s=[];for(let p=0;p<A;p++)s.push(j(ke($,p),"yyyy-MM-dd"));const a=p=>{const c=r.filter(m=>m.date===p&&n.some(C=>String(C.id)===String(m.employeeId))),h=Os(n,r,p),F=c.filter(m=>fe(m.shiftCode)).length,Ke=n.length-F,rs=c.filter(m=>m.shiftCode==="V").length,Ie=c.filter(m=>["S","IW","IC","AC","AW"].includes(m.shiftCode)).length,he=c.filter(m=>n.find(L=>L.id===m.employeeId)?.role==="SrEng"&&fe(m.shiftCode)).length,w=c.filter(m=>n.find(L=>L.id===m.employeeId)?.role==="PS"&&fe(m.shiftCode)).length,ue=c.filter(m=>{const C=n.find(se=>se.id===m.employeeId);if(!C)return!1;const L=ee(C);return(L==="B1"||L==="B1-2")&&fe(m.shiftCode)}),Cs=c.filter(m=>{const C=n.find(se=>se.id===m.employeeId);if(!C)return!1;const L=ee(C);return(L==="B2"||L==="B1-2")&&fe(m.shiftCode)}),Y=c.filter(m=>{const C=n.find(se=>se.id===m.employeeId);return C?ee(C)==="Cat A"&&fe(m.shiftCode):!1}),Ms=n.filter(m=>{const C=ee(m);return C==="B1"||C==="B1-2"}).length,ks=n.filter(m=>{const C=ee(m);return C==="B2"||C==="B1-2"}).length,Ds=n.filter(m=>ee(m)==="Cat A").length;let Ye=0;n.forEach(m=>{m.role!=="PM"&&m.role!=="PS"&&(Ye+=8*(m.grade/100))});const qe=Ye>0?ae/Ye:1,Ks=Math.ceil(Ms*qe),Ys=Math.ceil(ks*qe),qs=Math.ceil(Ds*qe),Zs=[0,6].includes(ps(new Date(p))),Js=new Date(p),Es=ot(Js)%2===0,Xs=c.filter(m=>{const C=n.find(Qs=>Qs.id===m.employeeId);if(!C)return!1;const L=C.role?.toUpperCase()||"";if(L==="PM"||L==="PS"||L==="SE")return!1;const se=m.shiftCode;return Es?se==="Ea"||se==="e":se==="La"}).length;return{dateStr:p,currentManhours:h,onDutyCount:F,offDutyCount:Ke,vacationCount:rs,sickCount:Ie,seOnDuty:he,psOnDuty:w,b1OnDuty:ue.length,b2OnDuty:Cs.length,catAOnDuty:Y.length,totalB1:Ms,totalB2:ks,totalCatA:Ds,minB1Required:Ks,minB2Required:Ys,minCatARequired:qs,totalPotentialManhours:Ye,requiredPercentage:qe,isWeekend:Zs,dailyTargetCount:Xs,isEaWeek:Es}},l=s.map(a),S=(p,c)=>{const h=[];let F=!0;if(c.isWeekend&&h.push({type:"yes",text:"Weekend - reduced staffing requirements"}),p){const Ke=p.grade===0;if(p.role==="PS"){const w=c.psOnDuty-1;w>=Z?h.push({type:"yes",text:`PS coverage OK: ${w} PS remain after granting (min ${Z})`}):(h.push({type:"no",text:`PS coverage insufficient: only ${w} PS after granting (need ${Z})`}),F=!1)}if(p.role==="SrEng"){const w=c.seOnDuty-1;w>=q?h.push({type:"yes",text:`SE coverage OK: ${w} SE remain after granting (min ${q})`}):(h.push({type:"no",text:`SE coverage insufficient: only ${w} SE after granting (need ${q})`}),F=!1)}const rs=8*(p.grade/100),Ie=c.currentManhours-rs;if(Ke?h.push({type:"yes",text:`${p.initials} has 0% grade - no manhours impact`}):Ie>=ae?h.push({type:"yes",text:`Manhours OK: ${Ie.toFixed(1)}h after granting (min ${ae}h)`}):(h.push({type:"no",text:`Manhours insufficient: ${Ie.toFixed(1)}h after granting (need ${ae}h)`}),F=!1),!Ke&&p.role!=="PM"&&p.role!=="PS"){const ue=r.find(Y=>Y.date===c.dateStr&&Y.employeeId===p.id)?.shiftCode||"-";if(c.isEaWeek?ue==="Ea"||ue==="e":ue==="La"){const Y=c.dailyTargetCount-1;Y<ms?(h.push({type:"no",text:`Daily Target would drop to ${Y} (min ${ms} required)`}),F=!1):Y<Ze?h.push({type:"info",text:`⚠️ WARNING: Daily Target will drop to ${Y} (orange zone, ${Ze}+ preferred)`}):h.push({type:"yes",text:`Daily Target OK: ${Y} after granting (≥${Ze})`})}else h.push({type:"yes",text:`Employee not on ${c.isEaWeek?"Ea":"La"} shift - no daily target impact`})}const he=ee(p);if(he==="B1"||he==="B1-2"){const w=c.b1OnDuty-1;w>=c.minB1Required?h.push({type:"yes",text:`B1 coverage OK: ${w} on duty after granting (min ${c.minB1Required})`}):(h.push({type:"no",text:`B1 coverage low: ${w} after granting (min ${c.minB1Required})`}),F=!1)}if(he==="B2"||he==="B1-2"){const w=c.b2OnDuty-1;w>=c.minB2Required?h.push({type:"yes",text:`B2 coverage OK: ${w} on duty after granting (min ${c.minB2Required})`}):(h.push({type:"no",text:`B2 coverage low: ${w} after granting (min ${c.minB2Required})`}),F=!1)}if(he==="Cat A"){const w=c.catAOnDuty-1,ue=p.grade<=50?.5:1;w>=c.minCatARequired?h.push({type:"yes",text:`Cat A coverage OK: ${w} on duty after granting (min ${c.minCatARequired})`}):h.push({type:"info",text:`Cat A at ${w} after granting (min ${c.minCatARequired}), grade ${p.grade}% = ${ue*100}% factor`})}}else c.currentManhours>=ae?h.push({type:"yes",text:`Current manhours: ${c.currentManhours.toFixed(1)}h (min ${ae}h)`}):(h.push({type:"no",text:`Current manhours: ${c.currentManhours.toFixed(1)}h (need ${ae}h)`}),F=!1),c.seOnDuty>=q?h.push({type:"yes",text:`SE on duty: ${c.seOnDuty} (min ${q})`}):(h.push({type:"no",text:`SE on duty: ${c.seOnDuty} (need ${q})`}),F=!1),c.psOnDuty>=Z?h.push({type:"yes",text:`PS on duty: ${c.psOnDuty} (min ${Z})`}):(h.push({type:"no",text:`PS on duty: ${c.psOnDuty} (need ${Z})`}),F=!1),h.push({type:"info",text:`B1: ${c.b1OnDuty}/${c.minB1Required} min | B2: ${c.b2OnDuty}/${c.minB2Required} min | Cat A: ${c.catAOnDuty}/${c.minCatARequired} min`}),c.dailyTargetCount<ms?h.push({type:"no",text:`Daily Target: ${c.dailyTargetCount} (${c.isEaWeek?"Ea":"La"} week) - RED ZONE, no off-days should be granted`}):c.dailyTargetCount<Ze?h.push({type:"info",text:`⚠️ Daily Target: ${c.dailyTargetCount} (${c.isEaWeek?"Ea":"La"} week) - ORANGE ZONE`}):h.push({type:"yes",text:`Daily Target: ${c.dailyTargetCount} (${c.isEaWeek?"Ea":"La"} week) - GREEN ZONE`});return{canGrant:F,reasons:h,empSpecific:!!p}},_=l.map(p=>({...p,result:S(v??null,p)})),U=_.every(p=>p.result.canGrant),B=Math.max(0,(l[0]?.seOnDuty||0)-q),ns=Math.max(0,(l[0]?.psOnDuty||0)-Z);return{canGrant:U,results:_,message:U?A>1?`OFF DAY CAN BE GRANTED (${A} days)`:"OFF DAY CAN BE GRANTED":"OFF DAY CANNOT BE GRANTED",stats:l[0]||{},positionVacation:{seCanTake:B,psCanTake:ns,seOnDuty:l[0]?.seOnDuty||0,psOnDuty:l[0]?.psOnDuty||0}}},[$,A,r,n,v]),vs=d.useCallback(s=>{d.startTransition(()=>{u(ke(i,s==="prev"?-1:1))})},[i,u]),ws=d.useCallback(s=>{d.startTransition(()=>{u(s==="prev"?Ot(i):zs(i,1))})},[i,u]),Ss=d.useCallback(s=>{d.startTransition(()=>{u(s==="prev"?Tt(i):Hs(i,1))})},[i,u]),as=d.useCallback((s,a,l)=>{b(s,a,l)},[b]);return e.jsxs("div",{className:"p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-display font-bold tracking-tight",children:"Schedule"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage daily shift assignments for TMBA teams"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(pt,{value:T,onValueChange:s=>P(s),children:e.jsxs(gt,{children:[e.jsx(cs,{value:"day","data-testid":"tab-day-view",children:"Day"}),e.jsx(cs,{value:"week","data-testid":"tab-week-view",children:"Week"}),e.jsx(cs,{value:"month","data-testid":"tab-month-view",children:"Month"})]})}),e.jsxs(E,{variant:"outline",className:"gap-2",onClick:()=>window.print(),"data-testid":"button-print",children:[e.jsx(jt,{className:"w-4 h-4"}),"Print / PDF"]}),e.jsx(At,{}),e.jsxs(Le,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"gap-2","data-testid":"button-check-off-day",children:[e.jsx(ye,{className:"w-4 h-4"}),"Check Off Day"]})}),e.jsxs(Re,{className:"max-w-5xl max-h-[90vh] p-0",children:[e.jsx(Fe,{className:"px-6 pt-6 pb-4 border-b",children:e.jsx($e,{className:"text-xl",children:"Off Day Availability Check"})}),e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"lg:w-[340px] border-b lg:border-b-0 lg:border-r p-4 bg-muted/30 space-y-4",children:[e.jsxs("div",{children:[e.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"Search Employee (name or code)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(As,{placeholder:"e.g. THRU or Thurner",value:Ve,onChange:s=>Te(s.target.value),className:"pl-9","data-testid":"input-employee-search"})]}),g.length>0&&e.jsx("div",{className:"mt-2 border rounded-md bg-background max-h-48 overflow-y-auto",children:g.map(s=>e.jsxs("button",{onClick:()=>{J(s.id),Te("")},className:"w-full px-3 py-2 text-left hover:bg-muted flex items-center gap-2 text-sm","data-testid":`employee-option-${s.initials}`,children:[e.jsx(Ls,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.initials}),e.jsx("span",{className:"text-muted-foreground",children:s.name}),e.jsx(O,{variant:"outline",className:"ml-auto text-xs",children:ee(s)})]},s.id))}),v&&e.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-primary/10 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:v.initials}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.name})]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>J(null),className:"h-6 px-2",children:"Clear"})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[e.jsx(O,{variant:"secondary",children:ee(v)}),e.jsx(O,{variant:"outline",children:v.role}),e.jsxs(O,{variant:"outline",children:[v.grade,"% grade"]})]})]})]}),e.jsxs("div",{children:[e.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"Days to Check"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ne,{value:A.toString(),onValueChange:s=>Ge(parseInt(s)),children:[e.jsx(re,{className:"w-24","data-testid":"select-days-to-check",children:e.jsx(de,{})}),e.jsx(le,{children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(M,{value:s.toString(),children:[s," day",s>1?"s":""]},s))})]}),e.jsx("div",{className:"flex-1",children:e.jsx(As,{type:"number",min:"1",max:"365",value:A,onChange:s=>Ge(Math.max(1,Math.min(365,parseInt(s.target.value)||1))),placeholder:"Custom",className:"w-full","data-testid":"input-days-custom"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:A===1?"Single day":`${A} consecutive days`})]}),e.jsxs("div",{children:[e.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"Start Date"}),e.jsx(Is,{mode:"single",selected:$,onSelect:s=>s&&xe(s),weekStartsOn:1,className:"rounded-md border mx-auto","data-testid":"calendar-off-day-date"})]}),e.jsxs("div",{className:"text-center p-2 bg-background rounded border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Checking:"}),e.jsxs("p",{className:"text-sm font-bold",children:[j($,"MMM d"),A>1&&` - ${j(ke($,A-1),"MMM d, yyyy")}`,A===1&&`, ${j($,"yyyy")}`]})]}),v&&e.jsxs("div",{children:[e.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"Off Day Type"}),e.jsxs(ne,{value:I,onValueChange:s=>We(s),children:[e.jsx(re,{"data-testid":"select-off-day-type",children:e.jsx(de,{})}),e.jsx(le,{children:D.map(s=>e.jsx(M,{value:s.code,children:s.label},s.code))})]})]})]}),e.jsx(De,{className:"flex-1 max-h-[60vh] lg:max-h-[70vh]",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs(te,{className:k("p-4",f.canGrant?"bg-green-50 border-green-200 dark:bg-green-950/30 dark:border-green-800":"bg-red-50 border-red-200 dark:bg-red-950/30 dark:border-red-800"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.canGrant?e.jsx(ye,{className:"w-8 h-8 text-green-600"}):e.jsx(Be,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("span",{className:k("font-bold text-lg block",f.canGrant?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"),children:f.message}),v&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["for ",v.initials," (",v.name,")"]})]})]}),f.positionVacation&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Position Availability:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const s=v?.role==="SrEng",a=s?f.positionVacation.seOnDuty-1:f.positionVacation.seOnDuty,l=s?a>=q:f.positionVacation.seCanTake>0;return e.jsxs("div",{className:k("rounded-lg p-3 border",l?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"SE"}),l?e.jsx(ye,{className:"w-5 h-5 text-green-600"}):e.jsx(Be,{className:"w-5 h-5 text-red-600"})]}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:f.positionVacation.seCanTake}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"can take off"}),e.jsxs("div",{className:"text-xs mt-1",children:["(",f.positionVacation.seOnDuty," on duty, min ",q,")"]})]})})(),(()=>{const s=v?.role==="PS",a=s?f.positionVacation.psOnDuty-1:f.positionVacation.psOnDuty,l=s?a>=Z:f.positionVacation.psCanTake>0;return e.jsxs("div",{className:k("rounded-lg p-3 border",l?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"PS"}),l?e.jsx(ye,{className:"w-5 h-5 text-green-600"}):e.jsx(Be,{className:"w-5 h-5 text-red-600"})]}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:f.positionVacation.psCanTake}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"can take off"}),e.jsxs("div",{className:"text-xs mt-1",children:["(",f.positionVacation.psOnDuty," on duty, min ",Z,")"]})]})})()]})]}),f.stats&&e.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-4 text-sm",children:[e.jsxs("div",{className:"bg-white/70 dark:bg-black/20 rounded p-2 text-center",children:[e.jsx("div",{className:"font-bold text-lg",children:f.stats.currentManhours?.toFixed(0)||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Manhours"})]}),e.jsxs("div",{className:"bg-white/70 dark:bg-black/20 rounded p-2 text-center",children:[e.jsx("div",{className:"font-bold text-lg",children:f.stats.b1OnDuty||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"B1"})]}),e.jsxs("div",{className:"bg-white/70 dark:bg-black/20 rounded p-2 text-center",children:[e.jsx("div",{className:"font-bold text-lg",children:f.stats.b2OnDuty||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"B2"})]}),e.jsxs("div",{className:"bg-white/70 dark:bg-black/20 rounded p-2 text-center",children:[e.jsx("div",{className:"font-bold text-lg",children:f.stats.catAOnDuty||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cat A"})]}),e.jsxs("div",{className:"bg-white/70 dark:bg-black/20 rounded p-2 text-center",children:[e.jsx("div",{className:"font-bold text-lg",children:f.stats.sickCount||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Sick"})]})]})]}),f.results?.map((s,a)=>e.jsxs(te,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.result.canGrant?e.jsx(ye,{className:"w-5 h-5 text-green-600"}):e.jsx(Be,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-semibold",children:j(new Date(s.dateStr),"EEE, MMM d")}),e.jsx(O,{variant:s.result.canGrant?"default":"destructive",children:s.result.canGrant?"OK":"NO"}),v&&s.result.canGrant&&e.jsxs(E,{size:"sm",className:"ml-auto",onClick:()=>H(s.dateStr),"data-testid":`apply-off-day-${a}`,children:["Apply ",I]})]}),e.jsx("div",{className:"space-y-1",children:s.result.reasons.map((l,S)=>e.jsxs("div",{className:k("flex items-start gap-2 text-sm p-2 rounded",l.type==="yes"?"bg-green-100/50 dark:bg-green-900/20":l.type==="no"?"bg-red-100/50 dark:bg-red-900/20":"bg-blue-100/50 dark:bg-blue-900/20"),children:[l.type==="yes"?e.jsx(ye,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}):l.type==="no"?e.jsx(Be,{className:"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5"}):e.jsx(us,{className:"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:l.type==="yes"?"text-green-700 dark:text-green-400":l.type==="no"?"text-red-700 dark:text-red-400":"text-blue-700 dark:text-blue-400",children:l.text})]},S))})]},a)),v&&f.canGrant&&f.results&&f.results.length>1&&e.jsxs(E,{className:"w-full",onClick:Q,"data-testid":"apply-all-off-days",children:["Apply ",I," to All ",f.results.filter(s=>s.result.canGrant).length," Approved Days"]}),e.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Off Day Rules:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[e.jsxs("li",{children:["Minimum ",ae," manhours must remain"]}),e.jsxs("li",{children:["Minimum ",q," SE must remain on duty"]}),e.jsxs("li",{children:["Minimum ",Z," PS must remain on duty"]}),e.jsxs("li",{children:["B1/B2/Cat A coverage based on % of ",ae,"h vs total potential"]}),e.jsx("li",{children:"Grade 0% employees can always take off"}),e.jsx("li",{children:"B1-2 license counts toward both B1 and B2"})]})]})]})})]})]})]}),e.jsxs(Le,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(E,{variant:"outline",size:"sm",className:"gap-2","data-testid":"button-training-view",children:[e.jsx(fs,{className:"w-4 h-4"}),"Education",be.length>0&&e.jsx(O,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:be.length})]})}),e.jsxs(Re,{className:"max-w-2xl max-h-[85vh] p-0",children:[e.jsx(Fe,{className:"px-6 pt-6 pb-4 border-b",children:e.jsxs($e,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5"}),"Training & Education Overview"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(ve,{className:"text-xs",children:"Start Date"}),e.jsxs(Ws,{open:ge,onOpenChange:me,children:[e.jsx(_s,{asChild:!0,children:e.jsxs(E,{variant:"outline",size:"sm",className:"w-[160px] justify-start text-left font-normal",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),j(X,"MMM d, yyyy")]})}),e.jsx(Us,{className:"w-auto p-0",align:"start",children:e.jsx(Is,{mode:"single",selected:X,onSelect:s=>{s&&(ys(s),me(!1))},weekStartsOn:1,initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(ve,{className:"text-xs",children:"Period"}),e.jsxs(ne,{value:String(ie),onValueChange:s=>Oe(Number(s)),children:[e.jsx(re,{className:"w-[120px]",children:e.jsx(de,{})}),e.jsxs(le,{children:[e.jsx(M,{value:"1",children:"1 day"}),e.jsx(M,{value:"7",children:"7 days"}),e.jsx(M,{value:"14",children:"14 days"}),e.jsx(M,{value:"30",children:"30 days"})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j(X,"MMM d")," - ",j(ke(X,ie-1),"MMM d, yyyy")]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ts.map(s=>e.jsxs("div",{className:"flex items-center gap-1.5 text-xs px-2 py-1 bg-muted rounded",children:[e.jsx("span",{className:k("w-2.5 h-2.5 rounded-full",s.color)}),e.jsx("span",{className:"font-medium",children:s.code}),e.jsxs("span",{className:"text-muted-foreground",children:["- ",s.label]})]},s.code))}),be.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No employees in training/school during this period"}):e.jsx(De,{className:"h-[350px] border rounded-lg",children:e.jsxs(ds,{children:[e.jsx(os,{children:e.jsxs(Ce,{children:[e.jsx(V,{children:"Employee"}),e.jsx(V,{children:"Department"}),e.jsx(V,{children:"Date"}),e.jsx(V,{children:"Type"})]})}),e.jsx(xs,{children:be.map((s,a)=>e.jsxs(Ce,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold",children:s.initials}),e.jsx("span",{className:"font-medium",children:s.name})]})}),e.jsx(G,{className:"text-muted-foreground",children:s.department.replace("S/","")}),e.jsx(G,{children:j(new Date(s.educationDate),"EEE, MMM d")}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:k("w-2 h-2 rounded-full",s.educationColor)}),e.jsx(O,{variant:"outline",className:"text-xs",children:s.educationType})]})})]},`${s.id}-${s.educationDate}-${a}`))})]})}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground pt-2 border-t",children:[e.jsxs("span",{children:["Total: ",be.length," education entries"]}),e.jsxs("span",{children:[new Set(be.map(s=>s.id)).size," unique employees"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Le,{open:je,onOpenChange:ss,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(E,{variant:"outline",size:"sm",className:"gap-2","data-testid":"button-vacation-summary",children:[e.jsx(Ne,{className:"w-4 h-4 text-orange-500"}),"Vacation Summary",e.jsx(O,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:ze.reduce((s,a)=>s+a.vCount,0)})]})}),e.jsxs(Re,{className:"max-w-3xl max-h-[85vh] p-0",children:[e.jsx(Fe,{className:"px-6 pt-6 pb-4 border-b",children:e.jsxs($e,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-orange-500"}),"Vacation Summary"]})}),e.jsxs("div",{className:"p-6",children:[e.jsx(De,{className:"h-[500px] border rounded-lg",children:e.jsxs(ds,{children:[e.jsx(os,{children:e.jsxs(Ce,{children:[e.jsx(V,{children:"Employee"}),e.jsx(V,{children:"Department"}),e.jsx(V,{className:"text-center",children:"Vacation Days"}),e.jsx(V,{children:"Dates"})]})}),e.jsx(xs,{children:ze.map(s=>e.jsxs(Ce,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-orange-100 text-orange-700 flex items-center justify-center text-xs font-bold",children:s.initials}),e.jsx("span",{className:"font-medium",children:s.name})]})}),e.jsx(G,{className:"text-muted-foreground",children:s.department.replace("S/","")}),e.jsx(G,{className:"text-center",children:e.jsx(O,{variant:s.vCount>0?"default":"secondary",className:"min-w-[32px]",children:s.vCount})}),e.jsx(G,{children:s.vCount>0?e.jsx("div",{className:"flex flex-wrap gap-1 max-w-md",children:s.vDates.map(a=>e.jsx(O,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:j(new Date(a),"MMM d")},a))}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})})]},s.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground pt-4 border-t mt-4",children:[e.jsxs("span",{children:["Total Vacation days: ",ze.reduce((s,a)=>s+a.vCount,0)]}),e.jsxs("span",{children:[ze.filter(s=>s.vCount>0).length," employees with Vacation"]})]})]})]})]}),e.jsxs(Le,{open:_e,onOpenChange:es,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(E,{variant:"outline",size:"sm",className:"gap-2","data-testid":"button-ft-summary",children:[e.jsx(Ne,{className:"w-4 h-4 text-amber-600"}),"FT Summary",e.jsx(O,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:He.reduce((s,a)=>s+a.ftCount,0)})]})}),e.jsxs(Re,{className:"max-w-3xl max-h-[85vh] p-0",children:[e.jsx(Fe,{className:"px-6 pt-6 pb-4 border-b",children:e.jsxs($e,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-amber-600"}),"FT (Feiertag/Holiday) Summary"]})}),e.jsxs("div",{className:"p-6",children:[e.jsx(De,{className:"h-[500px] border rounded-lg",children:e.jsxs(ds,{children:[e.jsx(os,{children:e.jsxs(Ce,{children:[e.jsx(V,{children:"Employee"}),e.jsx(V,{children:"Department"}),e.jsx(V,{className:"text-center",children:"FT Count"}),e.jsx(V,{children:"Dates"})]})}),e.jsx(xs,{children:He.map(s=>e.jsxs(Ce,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-amber-100 text-amber-700 flex items-center justify-center text-xs font-bold",children:s.initials}),e.jsx("span",{className:"font-medium",children:s.name})]})}),e.jsx(G,{className:"text-muted-foreground",children:s.department.replace("S/","")}),e.jsx(G,{className:"text-center",children:e.jsx(O,{variant:s.ftCount>0?"default":"secondary",className:"min-w-[32px]",children:s.ftCount})}),e.jsx(G,{children:s.ftCount>0?e.jsx("div",{className:"flex flex-wrap gap-1 max-w-md",children:s.ftDates.map(a=>e.jsx(O,{variant:"outline",className:"text-xs bg-amber-50 text-amber-700 border-amber-200",children:j(new Date(a),"MMM d")},a))}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})})]},s.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground pt-4 border-t mt-4",children:[e.jsxs("span",{children:["Total FT days: ",He.reduce((s,a)=>s+a.ftCount,0)]}),e.jsxs("span",{children:[He.filter(s=>s.ftCount>0).length," employees with FT"]})]})]})]})]})]}),e.jsxs(ne,{value:R,onValueChange:pe,children:[e.jsx(re,{className:"w-[140px]","data-testid":"select-department-filter",children:e.jsx(de,{placeholder:"Department"})}),e.jsxs(le,{children:[e.jsx(M,{value:"all",children:"All Teams"}),e.jsx(M,{value:"S/TMBA",children:"TMBA"}),e.jsx(M,{value:"S/TMBAA",children:"TMBAA"}),e.jsx(M,{value:"S/TMBAB",children:"TMBAB"}),e.jsx(M,{value:"S/TMBAC",children:"TMBAC"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(te,{className:"p-4 bg-card border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(Gs,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Daily Hours"}),e.jsx("p",{className:k("text-xl font-display font-bold",Ue<$s?"text-red-500":"text-green-500"),children:Ue.toFixed(1)})]})]})}),e.jsx(te,{className:"p-4 bg-card border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-success/10 flex items-center justify-center",children:e.jsx(lt,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Daily Target"}),e.jsxs("p",{className:"text-xl font-display font-bold",children:[$s,"h"]})]})]})}),e.jsx(te,{className:"p-4 bg-card border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-warning/10 flex items-center justify-center",children:e.jsx(it,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"On Duty"}),e.jsx("p",{className:"text-xl font-display font-bold",children:Ae.onDuty})]})]})}),e.jsx(te,{className:"p-4 bg-card border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-accent flex items-center justify-center",children:e.jsx(Ne,{className:"w-5 h-5 text-accent-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Off Duty"}),e.jsx("p",{className:"text-xl font-display font-bold",children:Ae.offDuty})]})]})})]}),t&&e.jsxs("div",{className:"flex items-center gap-4 px-3 py-2 bg-muted/50 rounded-lg text-xs text-muted-foreground border","data-testid":"import-metadata-info",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Data Source:"}),e.jsxs("span",{children:["Imported ",j(new Date(t.importedAt),"MMM d, yyyy HH:mm")]}),e.jsx("span",{className:"text-border",children:"|"}),e.jsxs("span",{children:[t.employeeCount," employees"]}),e.jsx("span",{className:"text-border",children:"|"}),e.jsxs("span",{children:[t.assignmentCount.toLocaleString()," assignments"]}),t.dateRange&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-border",children:"|"}),e.jsxs("span",{children:["Range: ",j(new Date(t.dateRange.start),"MMM d")," - ",j(new Date(t.dateRange.end),"MMM d, yyyy")]})]})]}),T==="day"&&e.jsxs(te,{className:"overflow-hidden border-border",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between bg-muted/30",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>vs("prev"),"data-testid":"button-prev-day",children:e.jsx(ls,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-display font-semibold text-lg",children:j(i,"EEEE, MMMM d, yyyy")}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-1 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Early: ",Ae.earlyShifts]}),e.jsxs("span",{children:["Late: ",Ae.lateShifts]}),e.jsxs("span",{children:["Off: ",Ae.offDuty]})]})]}),e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>vs("next"),"data-testid":"button-next-day",children:e.jsx(is,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:z.map(s=>{const a=x(ce,s.id)||"-";return Je.find(l=>l.code===a),e.jsxs("div",{className:k("p-3 rounded-lg border flex items-center justify-between",s.role==="PM"&&"bg-amber-50 border-amber-200",s.role==="PS"&&"bg-emerald-50 border-emerald-200",s.role==="SrEng"&&"bg-lime-50 border-lime-200",!["PM","PS","SrEng"].includes(s.role)&&"bg-card border-border"),"data-testid":`employee-card-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-xs font-mono font-bold text-primary",children:s.initials}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.role," • ",s.department.replace("S/","")]})]})]}),e.jsx(gs,{value:a,onValueChange:l=>as(ce,s.id,l),"data-testid":`select-shift-day-${s.id}`})]},s.id)})})})]}),T==="week"&&e.jsxs(te,{className:"overflow-hidden border-border",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between bg-muted/30",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>ws("prev"),"data-testid":"button-prev-week",children:e.jsx(ls,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ne,{value:String(dt(i,{weekStartsOn:1,firstWeekContainsDate:4})),onValueChange:s=>{d.startTransition(()=>{const a=ft(i,parseInt(s),{weekStartsOn:1,firstWeekContainsDate:4});u(ct(a,{weekStartsOn:1}))})},children:[e.jsx(re,{className:"w-[100px]","data-testid":"select-week",children:e.jsx(de,{placeholder:"Week"})}),e.jsx(le,{children:e.jsx(De,{className:"h-[300px]",children:Array.from({length:52},(s,a)=>a+1).map(s=>e.jsxs(M,{value:String(s),children:["Week ",s]},s))})})]}),e.jsxs(ne,{value:String(i.getFullYear()),onValueChange:s=>{d.startTransition(()=>{u(new Date(parseInt(s),i.getMonth(),i.getDate()))})},children:[e.jsx(re,{className:"w-[90px]","data-testid":"select-week-year",children:e.jsx(de,{})}),e.jsx(le,{children:[2024,2025,2026,2027,2028].map(s=>e.jsx(M,{value:String(s),children:s},s))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground hidden sm:inline",children:[j(new Date(W[0]),"MMM d")," - ",j(new Date(W[6]),"MMM d")]})]}),e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>ws("next"),"data-testid":"button-next-week",children:e.jsx(is,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx($t,{employees:z,weekDates:W,getAssignment:x,onShiftChange:as})})]}),T==="month"&&e.jsxs(te,{className:"overflow-hidden border-border",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between bg-muted/30",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>Ss("prev"),"data-testid":"button-prev-month",children:e.jsx(ls,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ne,{value:String(i.getMonth()),onValueChange:s=>{d.startTransition(()=>{u(new Date(i.getFullYear(),parseInt(s),1))})},children:[e.jsx(re,{className:"w-[130px]","data-testid":"select-month",children:e.jsx(de,{})}),e.jsx(le,{children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((s,a)=>e.jsx(M,{value:String(a),children:s},a))})]}),e.jsxs(ne,{value:String(i.getFullYear()),onValueChange:s=>{d.startTransition(()=>{u(new Date(parseInt(s),i.getMonth(),1))})},children:[e.jsx(re,{className:"w-[90px]","data-testid":"select-year",children:e.jsx(de,{})}),e.jsx(le,{children:[2024,2025,2026,2027,2028].map(s=>e.jsx(M,{value:String(s),children:s},s))})]})]}),e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>Ss("next"),"data-testid":"button-next-month",children:e.jsx(is,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"overflow-x-auto",children:K.length>0&&e.jsx(Vt,{employees:z,monthDays:K,getAssignment:x,onShiftChange:as})})]})]})}export{Zt as CalendarPage};
