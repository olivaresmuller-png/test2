import{c as ye,r as o,R as Oe,N as $e,j as e,O as ze,Q as te,V as J,W as He,l as q,u as we,D as le,d as Be,B as L,F as Ge,e as ie,f as oe,g as ce,U as We,x as pe,X as Ye,I as se,z as ge,Y as je,Z as Xe,_ as Qe,$ as qe}from"./index-DFiRHIs1.js";import{F as Ze,r as Je,u as et,l as tt,S as st,U as nt}from"./xlsx-CY811sEw.js";import{g as rt,u as at,h as Ee,i as lt,S as W,a as Y,f as X,b as Q,e as g}from"./select-Bupf49YT.js";import{B as R,L as V}from"./label-BmvUlmpa.js";import{P as Se,T as it,C as ot}from"./checkbox-ejZO3v2F.js";import{P as ct}from"./pen-Bk13J6PT.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ve=ye("award",dt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],mt=ye("percent",ut);function Z(t,s,{checkForDefaultPrevented:n=!0}={}){return function(l){if(t?.(l),n===!1||!l.defaultPrevented)return s?.(l)}}var xt=Oe[" useInsertionEffect ".trim().toString()]||$e;function ht({prop:t,defaultProp:s,onChange:n=()=>{},caller:a}){const[l,m,c]=ft({defaultProp:s,onChange:n}),i=t!==void 0,S=i?t:l;{const j=o.useRef(t!==void 0);o.useEffect(()=>{const d=j.current;d!==i&&console.warn(`${a} is changing from ${d?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),j.current=i},[i,a])}const y=o.useCallback(j=>{if(i){const d=pt(j)?j(t):j;d!==t&&c.current?.(d)}else m(j)},[i,t,m,c]);return[S,y]}function ft({defaultProp:t,onChange:s}){const[n,a]=o.useState(t),l=o.useRef(n),m=o.useRef(s);return xt(()=>{m.current=s},[s]),o.useEffect(()=>{l.current!==n&&(m.current?.(n),l.current=n)},[n,l]),[n,a,m]}function pt(t){return typeof t=="function"}var Ce=["PageUp","PageDown"],Ae=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ke={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ee="Slider",[de,gt,jt]=rt(ee),[Me]=ze(ee,[jt]),[St,ne]=Me(ee),Pe=o.forwardRef((t,s)=>{const{name:n,min:a=0,max:l=100,step:m=1,orientation:c="horizontal",disabled:i=!1,minStepsBetweenThumbs:S=0,defaultValue:y=[a],value:j,onValueChange:d=()=>{},onValueCommit:v=()=>{},inverted:w=!1,form:f,...p}=t,x=o.useRef(new Set),h=o.useRef(0),B=c==="horizontal"?vt:bt,[N=[],T]=ht({prop:j,defaultProp:y,onChange:b=>{[...x.current][h.current]?.focus(),d(b)}}),D=o.useRef(N);function C(b){const A=Et(N,b);F(b,A)}function K(b){F(b,h.current)}function U(){const b=D.current[h.current];N[h.current]!==b&&v(N)}function F(b,A,{commit:I}={commit:!1}){const O=Mt(m),$=Pt(Math.round((b-a)/m)*m+a,O),_=Ee($,[a,l]);T((P=[])=>{const k=wt(P,_,A);if(kt(k,S*m)){h.current=k.indexOf(_);const z=String(k)!==String(P);return z&&I&&v(k),z?k:P}else return P})}return e.jsx(St,{scope:t.__scopeSlider,name:n,disabled:i,min:a,max:l,valueIndexToChangeRef:h,thumbs:x.current,values:N,orientation:c,form:f,children:e.jsx(de.Provider,{scope:t.__scopeSlider,children:e.jsx(de.Slot,{scope:t.__scopeSlider,children:e.jsx(B,{"aria-disabled":i,"data-disabled":i?"":void 0,...p,ref:s,onPointerDown:Z(p.onPointerDown,()=>{i||(D.current=N)}),min:a,max:l,inverted:w,onSlideStart:i?void 0:C,onSlideMove:i?void 0:K,onSlideEnd:i?void 0:U,onHomeKeyDown:()=>!i&&F(a,0,{commit:!0}),onEndKeyDown:()=>!i&&F(l,N.length-1,{commit:!0}),onStepKeyDown:({event:b,direction:A})=>{if(!i){const $=Ce.includes(b.key)||b.shiftKey&&Ae.includes(b.key)?10:1,_=h.current,P=N[_],k=m*$*A;F(P+k,_,{commit:!0})}}})})})})});Pe.displayName=ee;var[Te,Re]=Me(ee,{startEdge:"left",endEdge:"right",size:"width",direction:1}),vt=o.forwardRef((t,s)=>{const{min:n,max:a,dir:l,inverted:m,onSlideStart:c,onSlideMove:i,onSlideEnd:S,onStepKeyDown:y,...j}=t,[d,v]=o.useState(null),w=J(s,B=>v(B)),f=o.useRef(void 0),p=at(l),x=p==="ltr",h=x&&!m||!x&&m;function M(B){const N=f.current||d.getBoundingClientRect(),T=[0,N.width],C=he(T,h?[n,a]:[a,n]);return f.current=N,C(B-N.left)}return e.jsx(Te,{scope:t.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:e.jsx(De,{dir:p,"data-orientation":"horizontal",...j,ref:w,style:{...j.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:B=>{const N=M(B.clientX);c?.(N)},onSlideMove:B=>{const N=M(B.clientX);i?.(N)},onSlideEnd:()=>{f.current=void 0,S?.()},onStepKeyDown:B=>{const T=ke[h?"from-left":"from-right"].includes(B.key);y?.({event:B,direction:T?-1:1})}})})}),bt=o.forwardRef((t,s)=>{const{min:n,max:a,inverted:l,onSlideStart:m,onSlideMove:c,onSlideEnd:i,onStepKeyDown:S,...y}=t,j=o.useRef(null),d=J(s,j),v=o.useRef(void 0),w=!l;function f(p){const x=v.current||j.current.getBoundingClientRect(),h=[0,x.height],B=he(h,w?[a,n]:[n,a]);return v.current=x,B(p-x.top)}return e.jsx(Te,{scope:t.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1,children:e.jsx(De,{"data-orientation":"vertical",...y,ref:d,style:{...y.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const x=f(p.clientY);m?.(x)},onSlideMove:p=>{const x=f(p.clientY);c?.(x)},onSlideEnd:()=>{v.current=void 0,i?.()},onStepKeyDown:p=>{const h=ke[w?"from-bottom":"from-top"].includes(p.key);S?.({event:p,direction:h?-1:1})}})})}),De=o.forwardRef((t,s)=>{const{__scopeSlider:n,onSlideStart:a,onSlideMove:l,onSlideEnd:m,onHomeKeyDown:c,onEndKeyDown:i,onStepKeyDown:S,...y}=t,j=ne(ee,n);return e.jsx(te.span,{...y,ref:s,onKeyDown:Z(t.onKeyDown,d=>{d.key==="Home"?(c(d),d.preventDefault()):d.key==="End"?(i(d),d.preventDefault()):Ce.concat(Ae).includes(d.key)&&(S(d),d.preventDefault())}),onPointerDown:Z(t.onPointerDown,d=>{const v=d.target;v.setPointerCapture(d.pointerId),d.preventDefault(),j.thumbs.has(v)?v.focus():a(d)}),onPointerMove:Z(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&l(d)}),onPointerUp:Z(t.onPointerUp,d=>{const v=d.target;v.hasPointerCapture(d.pointerId)&&(v.releasePointerCapture(d.pointerId),m(d))})})}),Ie="SliderTrack",_e=o.forwardRef((t,s)=>{const{__scopeSlider:n,...a}=t,l=ne(Ie,n);return e.jsx(te.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...a,ref:s})});_e.displayName=Ie;var ue="SliderRange",Le=o.forwardRef((t,s)=>{const{__scopeSlider:n,...a}=t,l=ne(ue,n),m=Re(ue,n),c=o.useRef(null),i=J(s,c),S=l.values.length,y=l.values.map(v=>Ve(v,l.min,l.max)),j=S>1?Math.min(...y):0,d=100-Math.max(...y);return e.jsx(te.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...a,ref:i,style:{...t.style,[m.startEdge]:j+"%",[m.endEdge]:d+"%"}})});Le.displayName=ue;var me="SliderThumb",Fe=o.forwardRef((t,s)=>{const n=gt(t.__scopeSlider),[a,l]=o.useState(null),m=J(s,i=>l(i)),c=o.useMemo(()=>a?n().findIndex(i=>i.ref.current===a):-1,[n,a]);return e.jsx(Nt,{...t,ref:m,index:c})}),Nt=o.forwardRef((t,s)=>{const{__scopeSlider:n,index:a,name:l,...m}=t,c=ne(me,n),i=Re(me,n),[S,y]=o.useState(null),j=J(s,M=>y(M)),d=S?c.form||!!S.closest("form"):!0,v=He(S),w=c.values[a],f=w===void 0?0:Ve(w,c.min,c.max),p=Bt(a,c.values.length),x=v?.[i.size],h=x?Ct(x,f,i.direction):0;return o.useEffect(()=>{if(S)return c.thumbs.add(S),()=>{c.thumbs.delete(S)}},[S,c.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${f}% + ${h}px)`},children:[e.jsx(de.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(te.span,{role:"slider","aria-label":t["aria-label"]||p,"aria-valuemin":c.min,"aria-valuenow":w,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...m,ref:j,style:w===void 0?{display:"none"}:t.style,onFocus:Z(t.onFocus,()=>{c.valueIndexToChangeRef.current=a})})}),d&&e.jsx(Ue,{name:l??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:w},a)]})});Fe.displayName=me;var yt="RadioBubbleInput",Ue=o.forwardRef(({__scopeSlider:t,value:s,...n},a)=>{const l=o.useRef(null),m=J(l,a),c=lt(s);return o.useEffect(()=>{const i=l.current;if(!i)return;const S=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(S,"value").set;if(c!==s&&j){const d=new Event("input",{bubbles:!0});j.call(i,s),i.dispatchEvent(d)}},[c,s]),e.jsx(te.input,{style:{display:"none"},...n,ref:m,defaultValue:s})});Ue.displayName=yt;function wt(t=[],s,n){const a=[...t];return a[n]=s,a.sort((l,m)=>l-m)}function Ve(t,s,n){const m=100/(n-s)*(t-s);return Ee(m,[0,100])}function Bt(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function Et(t,s){if(t.length===1)return 0;const n=t.map(l=>Math.abs(l-s)),a=Math.min(...n);return n.indexOf(a)}function Ct(t,s,n){const a=t/2,m=he([0,50],[0,a]);return(a-m(s)*n)*n}function At(t){return t.slice(0,-1).map((s,n)=>t[n+1]-s)}function kt(t,s){if(s>0){const n=At(t);return Math.min(...n)>=s}return!0}function he(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(t[1]-t[0]);return s[0]+a*(n-t[0])}}function Mt(t){return(String(t).split(".")[1]||"").length}function Pt(t,s){const n=Math.pow(10,s);return Math.round(t*n)/n}var Ke=Pe,Tt=_e,Rt=Le,Dt=Fe;const xe=o.forwardRef(({className:t,...s},n)=>e.jsxs(Ke,{ref:n,className:q("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(Tt,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(Rt,{className:"absolute h-full bg-primary"})}),e.jsx(Dt,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));xe.displayName=Ke.displayName;function be(t,s,n){const l=t.Sheets[s][n];if(!l||!l.s)return!1;const m=l.s;if(m.font&&m.font.color){const c=m.font.color;if(c.rgb){const i=c.rgb.toUpperCase();if(i==="FF0000"||i==="C00000"||i==="FF3333"||i.startsWith("FF")&&i.charAt(2)<="3"&&i.charAt(4)<="3")return!0}if(c.theme!==void 0&&c.theme===5)return!0}return!1}function Ne(t){let s="",n=t;for(;n>=0;)s=String.fromCharCode(n%26+65)+s,n=Math.floor(n/26)-1;return s}const It=[{col:5,aircraft:"A220"},{col:6,aircraft:"A320 CF",hasNeo:!0},{col:7,aircraft:"A330 RR"},{col:8,aircraft:"A343"},{col:9,aircraft:"A350"},{col:10,aircraft:"B777"}],_t=[{col:11,skill:"RR Fan Blade"},{col:12,skill:"A220 RU"},{col:13,skill:"A320 RU"},{col:14,skill:"A320NEO RU"},{col:15,skill:"A330 RU"},{col:16,skill:"A343 RU"},{col:17,skill:"A350 RU"},{col:18,skill:"B777 RU"},{col:19,skill:"A32CFM Boro"},{col:20,skill:"A32PW Boro"},{col:21,skill:"A330RR Boro"},{col:22,skill:"A340 Boro"},{col:23,skill:"A350 Boro"},{col:24,skill:"B777 Boro"},{col:25,skill:"A220 Boro"},{col:26,skill:"Forklift"},{col:27,skill:"Walliclean"},{col:28,skill:"FUEL TANK"},{col:29,skill:"CYCLEAN"},{col:30,skill:"Cobra"}];function Lt(t){if(!t)return null;const s=t.toUpperCase().trim();return s==="B1/2"||s==="B1-2"?"B1/2":s.startsWith("B1")?"B1":s.startsWith("B2")?"B2":s==="A"?"A":null}function Ft(t){if(!t)return!1;const s=t.toUpperCase().trim();return s.includes("N")||s.includes("NEO")}function Ut(t){if(!t)return{position:"",isMentor:!1};const s=t.toUpperCase().trim(),n=s.includes("GAS");let a="";return s.includes("PM")?a="PM":s.includes("PS")?a="PS":s.includes("SE")&&(a="SE"),{position:a,isMentor:n}}function Vt(t){if(!t)return!1;const s=String(t).toUpperCase().trim();return s==="X"||s==="YES"||s==="1"||s==="TRUE"}function Kt(){const[t,s]=o.useState(!1),[n,a]=o.useState([]),[l,m]=o.useState(null),[c,i]=o.useState(!1),S=o.useRef(null),{importData:y,assignments:j}=we(),d=async f=>{const p=f.target.files?.[0];if(p){i(!0),m(null),a([]);try{const x=await p.arrayBuffer(),h=Je(x,{type:"array",cellStyles:!0}),M=h.SheetNames[0],B=h.Sheets[M],N=et.sheet_to_json(B,{header:1,defval:""}),T=[];for(let D=1;D<N.length;D++){const C=N[D];if(!C||C.length<2)continue;const K=String(C[0]||"").trim(),U=String(C[1]||"").trim().toUpperCase();if(!K||!U||U.length<2)continue;const F=String(C[3]||""),{position:b,isMentor:A}=Ut(F),I=[],O=[],$=D+1;for(const{col:P,aircraft:k,hasNeo:z}of It){const G=String(C[P]||"").trim(),H=Lt(G);if(H){const re=Ne(P)+$;be(h,M,re)?O.push(`${k}: ${H}`):(I.push({aircraft:k,license:H}),z&&Ft(G)&&I.push({aircraft:"A320 NEO",license:H}))}}const _=[];A&&_.push("GAS Mentor");for(const{col:P,skill:k}of _t){const z=C[P];if(Vt(z)){const G=Ne(P)+$;be(h,M,G)?O.push(k):_.push(k)}}T.push({name:K,initials:U,position:b,isMentor:A,licenses:I,certifications:_,trainingPlanned:O})}T.length===0?m("No valid employee data found. Make sure column A has names and column B has initials."):a(T)}catch(x){m(`Error reading file: ${x instanceof Error?x.message:"Unknown error"}`)}finally{i(!1),S.current&&(S.current.value="")}}},v=()=>{const f=n.map((p,x)=>({id:`emp-${p.initials.toLowerCase()}-${x}`,name:p.name,initials:p.initials,department:"S/TMBA",role:p.position==="PM"?"PM":p.position==="PS"?"PS":p.position==="SE"?"SrEng":"Eng",grade:100,skills:p.licenses.map(h=>({aircraftType:h.aircraft,license:h.license})),certifications:p.certifications}));y({employees:f,assignments:j}),s(!1),a([])},w=f=>{switch(f){case"B1":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"B2":return"bg-green-500/20 text-green-400 border-green-500/30";case"B1/2":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"A":return"bg-orange-500/20 text-orange-400 border-orange-500/30";default:return""}};return e.jsxs(le,{open:t,onOpenChange:s,children:[e.jsx(Be,{asChild:!0,children:e.jsxs(L,{variant:"outline",className:"gap-2","data-testid":"button-import-employees",children:[e.jsx(Ge,{className:"w-4 h-4"}),"Import Employees"]})}),e.jsxs(ie,{className:"max-w-5xl max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Import Employee Data from Excel"]})}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Expected Excel Format (Columns A-AE):"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 text-muted-foreground text-xs",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"A:"})," Name | ",e.jsx("strong",{children:"B:"})," Initials | ",e.jsx("strong",{children:"D:"})," Position (PM/PS/SE/GAS)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"F-K:"})," Licenses (A220, A320, A330, A343, A350, B777)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"L:"})," RR Fan Blade | ",e.jsx("strong",{children:"M-S:"})," Run Up capabilities"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"T-Z:"})," Borescope | ",e.jsx("strong",{children:"AA-AE:"})," Forklift, Walliclean, Tank, Cyclean, Cobra"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{ref:S,type:"file",accept:".xlsx,.xls",onChange:d,className:"hidden","data-testid":"input-employee-file"}),e.jsxs(L,{onClick:()=>S.current?.click(),disabled:c,className:"gap-2","data-testid":"button-select-employee-file",children:[e.jsx(We,{className:"w-4 h-4"}),c?"Processing...":"Select Excel File"]}),n.length>0&&e.jsxs(R,{variant:"secondary",className:"gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),n.length," employees found"]})]}),l&&e.jsxs("div",{className:"flex items-center gap-2 text-destructive bg-destructive/10 rounded-lg p-3",children:[e.jsx(Ye,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:l})]}),n.length>0&&e.jsx("div",{className:"flex-1 overflow-auto border rounded-lg",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 font-medium",children:"Name"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Code"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Position"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Licenses"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Skills"}),e.jsx("th",{className:"text-left p-2 font-medium text-red-400",children:"Training Planned"})]})}),e.jsx("tbody",{children:n.map((f,p)=>e.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[e.jsx("td",{className:"p-2",children:f.name}),e.jsx("td",{className:"p-2 font-mono font-medium",children:f.initials}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex gap-1",children:[f.position&&e.jsx(R,{variant:"outline",children:f.position}),f.isMentor&&e.jsx(R,{variant:"outline",className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",children:"GAS"})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[f.licenses.map((x,h)=>e.jsxs(R,{variant:"outline",className:`text-xs ${w(x.license)}`,children:[x.aircraft,": ",x.license]},h)),f.licenses.length===0&&e.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:[f.certifications.filter(x=>x!=="GAS Mentor").slice(0,4).map((x,h)=>e.jsx(R,{variant:"secondary",className:"text-xs",children:x},h)),f.certifications.filter(x=>x!=="GAS Mentor").length>4&&e.jsxs(R,{variant:"secondary",className:"text-xs",children:["+",f.certifications.filter(x=>x!=="GAS Mentor").length-4]}),f.certifications.filter(x=>x!=="GAS Mentor").length===0&&e.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-[180px]",children:[f.trainingPlanned.slice(0,3).map((x,h)=>e.jsx(R,{variant:"outline",className:"text-xs bg-red-500/20 text-red-400 border-red-500/30",children:x},h)),f.trainingPlanned.length>3&&e.jsxs(R,{variant:"outline",className:"text-xs bg-red-500/20 text-red-400 border-red-500/30",children:["+",f.trainingPlanned.length-3]}),f.trainingPlanned.length===0&&e.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})]})})]},p))})]})}),n.length>0&&e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[e.jsx(L,{variant:"outline",onClick:()=>{a([]),m(null)},children:"Cancel"}),e.jsxs(L,{onClick:v,className:"gap-2","data-testid":"button-confirm-employee-import",children:[e.jsx(pe,{className:"w-4 h-4"}),"Import ",n.length," Employees"]})]})]})]})]})}const Ot=["B1","B2","B1/2","A"];function Xt(){const{employees:t,addEmployee:s,removeEmployee:n,updateEmployee:a}=we(),[l,m]=o.useState(""),[c]=tt(l,150),[i,S]=o.useState("all"),[y,j]=o.useState(!1),[d,v]=o.useState(null),[w,f]=o.useState(!1),[p,x]=o.useState([]),[h,M]=o.useState([]),[B,N]=o.useState("Eng"),[T,D]=o.useState(""),[C,K]=o.useState(""),[U,F]=o.useState("B1"),[b,A]=o.useState({initials:"",name:"",department:"S/TMBAA",role:"Eng",grade:100}),I=o.useMemo(()=>t.filter(r=>{const u=r.name.toLowerCase().includes(c.toLowerCase())||r.initials.toLowerCase().includes(c.toLowerCase()),E=i==="all"||r.department===i;return u&&E}),[t,c,i]),O=["PM","PS","SrEng","Eng"],$=o.useMemo(()=>O.map(r=>({role:r,label:r==="PM"?"Production Manager":r==="PS"?"Production Supervisor":r==="SrEng"?"Senior Engineer":"Engineer",employees:I.filter(u=>u.role===r)})).filter(r=>r.employees.length>0),[I]),_=()=>{s({...b,skills:[],certifications:[]}),A({initials:"",name:"",department:"S/TMBAA",role:"Eng",grade:100}),j(!1)},P=o.useCallback((r,u)=>{a(r,{grade:u})},[a]),k=r=>{v(r),x([...r.skills]),M([...r.certifications]),N(r.role),D(r.name),K(""),F("B1"),f(!0)},z=()=>{if(!C)return;p.some(u=>u.aircraftType===C&&u.license===U)||x([...p,{aircraftType:C,license:U}]),K("")},G=r=>{x(p.filter((u,E)=>E!==r))},H=r=>{h.includes(r)?M(h.filter(u=>u!==r)):M([...h,r])},re=()=>{d&&a(d.id,{name:T,role:B,skills:p,certifications:h}),f(!1),v(null)},fe=r=>{switch(r){case"PM":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"PS":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"SrEng":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"Eng":return"bg-slate-100 text-slate-700 dark:bg-slate-800/50 dark:text-slate-400"}};return e.jsxs("div",{className:"p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-display font-bold tracking-tight",children:"Employees"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage team members, skills, and qualifications"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{}),e.jsxs(le,{open:y,onOpenChange:j,children:[e.jsx(Be,{asChild:!0,children:e.jsxs(L,{"data-testid":"button-add-employee",className:"gap-2",children:[e.jsx(Se,{className:"w-4 h-4"}),"Add Employee"]})}),e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"Add New Employee"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"initials",children:"Initials"}),e.jsx(se,{id:"initials","data-testid":"input-initials",placeholder:"e.g., JAWE",value:b.initials,onChange:r=>A(u=>({...u,initials:r.target.value.toUpperCase()}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"role",children:"Role"}),e.jsxs(W,{value:b.role,onValueChange:r=>A(u=>({...u,role:r})),children:[e.jsx(Y,{"data-testid":"select-role",children:e.jsx(X,{})}),e.jsxs(Q,{children:[e.jsx(g,{value:"PM",children:"Production Manager"}),e.jsx(g,{value:"PS",children:"Production Supervisor"}),e.jsx(g,{value:"SrEng",children:"Senior Engineer"}),e.jsx(g,{value:"Eng",children:"Engineer"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"name",children:"Full Name"}),e.jsx(se,{id:"name","data-testid":"input-name",placeholder:"Last name, First name",value:b.name,onChange:r=>A(u=>({...u,name:r.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"department",children:"Department"}),e.jsxs(W,{value:b.department,onValueChange:r=>A(u=>({...u,department:r})),children:[e.jsx(Y,{"data-testid":"select-department",children:e.jsx(X,{})}),e.jsxs(Q,{children:[e.jsx(g,{value:"S/TMBA",children:"S/TMBA"}),e.jsx(g,{value:"S/TMBAA",children:"S/TMBAA"}),e.jsx(g,{value:"S/TMBAB",children:"S/TMBAB"}),e.jsx(g,{value:"S/TMBAC",children:"S/TMBAC"}),e.jsx(g,{value:"S/TMBAD",children:"S/TMBAD"}),e.jsx(g,{value:"S/TMBB",children:"S/TMBB"}),e.jsx(g,{value:"S/TMBBA",children:"S/TMBBA"}),e.jsx(g,{value:"S/TMBBB",children:"S/TMBBB"}),e.jsx(g,{value:"S/TMBBC",children:"S/TMBBC"}),e.jsx(g,{value:"S/TMBBD",children:"S/TMBBD"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{children:["Grade: ",b.grade,"%"]}),e.jsx(xe,{"data-testid":"slider-grade",value:[b.grade],onValueChange:([r])=>A(u=>({...u,grade:r})),min:0,max:100,step:10})]}),e.jsx(L,{onClick:_,className:"w-full","data-testid":"button-confirm-add",children:"Add Employee"})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(st,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(se,{"data-testid":"input-search-employees",placeholder:"Search by name or initials...",className:"pl-10",value:l,onChange:r=>m(r.target.value)})]}),e.jsxs(W,{value:i,onValueChange:S,children:[e.jsx(Y,{className:"w-[160px]","data-testid":"select-filter-department",children:e.jsx(X,{placeholder:"Department"})}),e.jsxs(Q,{children:[e.jsx(g,{value:"all",children:"All Departments"}),e.jsx(g,{value:"S/TMBA",children:"S/TMBA"}),e.jsx(g,{value:"S/TMBAA",children:"S/TMBAA"}),e.jsx(g,{value:"S/TMBAB",children:"S/TMBAB"}),e.jsx(g,{value:"S/TMBAC",children:"S/TMBAC"}),e.jsx(g,{value:"S/TMBAD",children:"S/TMBAD"}),e.jsx(g,{value:"S/TMBB",children:"S/TMBB"}),e.jsx(g,{value:"S/TMBBA",children:"S/TMBBA"}),e.jsx(g,{value:"S/TMBBB",children:"S/TMBBB"}),e.jsx(g,{value:"S/TMBBC",children:"S/TMBBC"}),e.jsx(g,{value:"S/TMBBD",children:"S/TMBBD"})]})]})]}),e.jsx("div",{className:"space-y-8",children:$.map(r=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(R,{variant:"outline",className:q("text-sm px-3 py-1",fe(r.role)),children:r.role}),e.jsx("h2",{className:"font-display font-semibold text-lg",children:r.label}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.employees.length,")"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:r.employees.map(u=>e.jsxs(ge,{className:"p-4 hover:shadow-md transition-shadow","data-testid":`card-employee-${u.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:e.jsx("span",{className:"font-mono font-bold text-primary text-[10px]",children:u.initials})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:u.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:u.department.replace("S/","")})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(L,{variant:"ghost",size:"icon",className:"text-primary hover:text-primary hover:bg-primary/10",onClick:()=>k(u),"data-testid":`button-edit-${u.id}`,children:e.jsx(ct,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>n(u.id),"data-testid":`button-remove-${u.id}`,children:e.jsx(it,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"Grade"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 max-w-[180px]",children:[e.jsx(xe,{value:[u.grade],onValueChange:([E])=>P(u.id,E),min:0,max:100,step:10,className:"flex-1","data-testid":`slider-grade-${u.id}`}),e.jsxs("span",{className:q("font-mono text-sm font-semibold w-10 text-right",u.grade>=100?"text-success":u.grade===0?"text-destructive":"text-warning"),children:[u.grade,"%"]})]})]}),u.skills.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.skills.filter(E=>E.license).slice(0,5).map((E,ae)=>e.jsxs(R,{variant:"secondary",className:q("text-xs",E.license==="B1"&&"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",E.license==="B2"&&"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300",E.license==="B1/2"&&"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"),children:[e.jsx("span",{className:"font-bold",children:E.aircraftType}),e.jsx("span",{className:"mx-0.5 opacity-50",children:"|"}),e.jsx("span",{children:E.license})]},ae)),u.skills.filter(E=>E.license).length>5&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["+",u.skills.filter(E=>E.license).length-5]})]})]}),u.certifications.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.certifications.slice(0,4).map((E,ae)=>e.jsx(R,{variant:"outline",className:"text-xs bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-800",children:E},ae)),u.certifications.length>4&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["+",u.certifications.length-4]})]})]})]})]},u.id))})]},r.role))}),I.length===0&&e.jsxs(ge,{className:"p-12 text-center",children:[e.jsx(nt,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"font-display font-semibold text-lg mb-2",children:"No employees found"}),e.jsx("p",{className:"text-muted-foreground",children:l?"Try a different search term":"Add your first employee to get started"})]}),e.jsx(le,{open:w,onOpenChange:f,children:e.jsxs(ie,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:e.jsx("span",{className:"font-mono font-bold text-primary text-xs",children:d?.initials})}),e.jsxs("div",{children:[e.jsxs("span",{children:["Edit Skills - ",d?.name]}),e.jsx("p",{className:"text-sm font-normal text-muted-foreground",children:d?.department})]})]})}),e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"text-base font-semibold",children:"Name"}),e.jsx(se,{value:T,onChange:r=>D(r.target.value),placeholder:"Employee name","data-testid":"input-edit-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"text-base font-semibold",children:"Position"}),e.jsxs(W,{value:B,onValueChange:r=>N(r),children:[e.jsx(Y,{"data-testid":"select-edit-role",children:e.jsx(X,{})}),e.jsxs(Q,{children:[e.jsx(g,{value:"PM",children:"PM - Production Manager"}),e.jsx(g,{value:"PS",children:"PS - Production Supervisor"}),e.jsx(g,{value:"SrEng",children:"SE - Senior Engineer"}),e.jsx(g,{value:"Eng",children:"Eng - Engineer"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(V,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Aircraft Licenses"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(W,{value:C,onValueChange:K,children:[e.jsx(Y,{className:"flex-1","data-testid":"select-aircraft-type",children:e.jsx(X,{placeholder:"Select aircraft type"})}),e.jsx(Q,{children:Xe.map(r=>e.jsx(g,{value:r,children:r},r))})]}),e.jsxs(W,{value:U,onValueChange:F,children:[e.jsx(Y,{className:"w-24","data-testid":"select-license-type",children:e.jsx(X,{})}),e.jsx(Q,{children:Ot.map(r=>e.jsx(g,{value:r,children:r},r))})]}),e.jsx(L,{onClick:z,disabled:!C,"data-testid":"button-add-skill",children:e.jsx(Se,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 min-h-[40px] p-3 bg-muted/30 rounded-lg border border-dashed",children:p.length===0?e.jsx("span",{className:"text-sm text-muted-foreground",children:"No aircraft licenses added"}):p.map((r,u)=>e.jsxs(R,{variant:"secondary",className:q("text-sm gap-1 pr-1",r.license==="B1"&&"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",r.license==="B2"&&"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300",r.license==="B1/2"&&"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"),children:[e.jsx("span",{className:"font-bold",children:r.aircraftType}),e.jsx("span",{className:"mx-0.5 opacity-50",children:"|"}),e.jsx("span",{children:r.license}),e.jsx("button",{onClick:()=>G(u),className:"ml-1 hover:bg-black/10 rounded p-0.5","data-testid":`button-remove-skill-${u}`,children:e.jsx(Qe,{className:"w-3 h-3"})})]},u))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(V,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"Special Skills & Certifications"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:qe.map(r=>e.jsxs("div",{className:q("flex items-center gap-2 p-2 rounded-lg border cursor-pointer transition-colors",h.includes(r)?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-700":"bg-muted/30 border-transparent hover:border-muted-foreground/20"),onClick:()=>H(r),children:[e.jsx(ot,{checked:h.includes(r),onCheckedChange:()=>H(r),"data-testid":`checkbox-cert-${r.replace(/\s/g,"-")}`}),e.jsx("span",{className:"text-sm",children:r})]},r))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"outline",className:"flex-1",onClick:()=>f(!1),children:"Cancel"}),e.jsx(L,{className:"flex-1",onClick:re,"data-testid":"button-save-skills",children:"Save Changes"})]})]})]})})]})}export{Xt as EmployeesPage};
