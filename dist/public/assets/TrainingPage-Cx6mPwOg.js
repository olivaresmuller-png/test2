import{c as vt,a6 as Xe,t as ee,a as E,a7 as jt,a8 as Tt,a9 as Ct,aa as Dt,K as Te,ab as Ke,M as Rt,b as Ve,ac as Se,ad as kt,ae as He,af as At,ag as Fe,ah as Et,r as u,j as r,ai as Pt,l as H,R as Mt,N as Ze,O as Ot,aj as _t,Q as Ce,ak as It,V as Lt,u as qt,a5 as Yt,G as ge,A as $e,z as W,a2 as ie,a3 as oe,B as A,a1 as le,J as Bt,I as V,_ as Ge,F as we,T as Ht,al as Ft,k as Q,p as $t,w as Gt}from"./index-DFiRHIs1.js";import{L as S,B as _}from"./label-BmvUlmpa.js";import{P as be,T as Qt,C as Qe}from"./checkbox-ejZO3v2F.js";import{S as ye}from"./scroll-area-Db5v6lLm.js";import{T as zt,a as Wt,b as ze,c as We}from"./tabs-D2as2i6A.js";import{S as Ut,a as Xt,f as Kt,b as Vt,e as St}from"./select-Bupf49YT.js";import{F as Ne}from"./funnel-o5Dn4Jlx.js";import{P as Zt}from"./pen-Bk13J6PT.js";import{s as Jt,C as ve,a as es}from"./setWeek-C11TKXL0.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ss=vt("save",ts);function rs(){return Object.assign({},Xe())}function as(a){let t=ee(a).getDay();return t===0&&(t=7),t}function ns(a,e){const t=e instanceof Date?E(e,0):new e(0);return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),t.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),t}const is=10;class Je{subPriority=0;validate(e,t){return!0}}class os extends Je{constructor(e,t,s,i,o){super(),this.value=e,this.validateValue=t,this.setValue=s,this.priority=i,o&&(this.subPriority=o)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,s){return this.setValue(e,t,this.value,s)}}class ls extends Je{priority=is;subPriority=-1;set(e,t){return t.timestampIsSet?e:E(e,ns(e,Date))}}class x{run(e,t,s,i){const o=this.parse(e,t,s,i);return o?{setter:new os(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,s){return!0}}class cs extends x{priority=140;parse(e,t,s){switch(t){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,t,s){return t.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const b={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},L={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function y(a,e){return a&&{value:e(a.value),rest:a.rest}}function g(a,e){const t=e.match(a);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function q(a,e){const t=e.match(a);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const s=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,d=t[5]?parseInt(t[5],10):0;return{value:s*(i*jt+o*Tt+d*Ct),rest:e.slice(t[0].length)}}function et(a){return g(b.anyDigitsSigned,a)}function w(a,e){switch(a){case 1:return g(b.singleDigit,e);case 2:return g(b.twoDigits,e);case 3:return g(b.threeDigits,e);case 4:return g(b.fourDigits,e);default:return g(new RegExp("^\\d{1,"+a+"}"),e)}}function de(a,e){switch(a){case 1:return g(b.singleDigitSigned,e);case 2:return g(b.twoDigitsSigned,e);case 3:return g(b.threeDigitsSigned,e);case 4:return g(b.fourDigitsSigned,e);default:return g(new RegExp("^-?\\d{1,"+a+"}"),e)}}function De(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function tt(a,e){const t=e>0,s=t?e:1-e;let i;if(s<=50)i=a||100;else{const o=s+50,d=Math.trunc(o/100)*100,m=a>=o%100;i=a+d-(m?100:0)}return t?i:1-i}function st(a){return a%400===0||a%4===0&&a%100!==0}class ds extends x{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,s){const i=o=>({year:o,isTwoDigitYear:t==="yy"});switch(t){case"y":return y(w(4,e),i);case"yo":return y(s.ordinalNumber(e,{unit:"year"}),i);default:return y(w(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,s){const i=e.getFullYear();if(s.isTwoDigitYear){const d=tt(s.year,i);return e.setFullYear(d,0,1),e.setHours(0,0,0,0),e}const o=!("era"in t)||t.era===1?s.year:1-s.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class us extends x{priority=130;parse(e,t,s){const i=o=>({year:o,isTwoDigitYear:t==="YY"});switch(t){case"Y":return y(w(4,e),i);case"Yo":return y(s.ordinalNumber(e,{unit:"year"}),i);default:return y(w(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,s,i){const o=Dt(e,i);if(s.isTwoDigitYear){const m=tt(s.year,o);return e.setFullYear(m,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Te(e,i)}const d=!("era"in t)||t.era===1?s.year:1-s.year;return e.setFullYear(d,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Te(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class ms extends x{priority=130;parse(e,t){return de(t==="R"?4:t.length,e)}set(e,t,s){const i=E(e,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Ke(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class fs extends x{priority=130;parse(e,t){return de(t==="u"?4:t.length,e)}set(e,t,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class xs extends x{priority=120;parse(e,t,s){switch(t){case"Q":case"QQ":return w(t.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class hs extends x{priority=120;parse(e,t,s){switch(t){case"q":case"qq":return w(t.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class ps extends x{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,s){const i=o=>o-1;switch(t){case"M":return y(g(b.month,e),i);case"MM":return y(w(2,e),i);case"Mo":return y(s.ordinalNumber(e,{unit:"month"}),i);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class gs extends x{priority=110;parse(e,t,s){const i=o=>o-1;switch(t){case"L":return y(g(b.month,e),i);case"LL":return y(w(2,e),i);case"Lo":return y(s.ordinalNumber(e,{unit:"month"}),i);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}class ws extends x{priority=100;parse(e,t,s){switch(t){case"w":return g(b.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return w(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,s,i){return Te(Jt(e,s,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function bs(a,e){const t=ee(a),s=Rt(t)-e;return t.setDate(t.getDate()-s*7),t}class ys extends x{priority=100;parse(e,t,s){switch(t){case"I":return g(b.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return w(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,s){return Ke(bs(e,s))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Ns=[31,28,31,30,31,30,31,31,30,31,30,31],vs=[31,29,31,30,31,30,31,31,30,31,30,31];class js extends x{priority=90;subPriority=1;parse(e,t,s){switch(t){case"d":return g(b.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return w(t.length,e)}}validate(e,t){const s=e.getFullYear(),i=st(s),o=e.getMonth();return i?t>=1&&t<=vs[o]:t>=1&&t<=Ns[o]}set(e,t,s){return e.setDate(s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Ts extends x{priority=90;subpriority=1;parse(e,t,s){switch(t){case"D":case"DD":return g(b.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return w(t.length,e)}}validate(e,t){const s=e.getFullYear();return st(s)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Re(a,e,t){const s=Xe(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,o=ee(a),d=o.getDay(),N=(e%7+7)%7,v=7-i,j=e<0||e>6?e-(d+v)%7:(N+v)%7-(d+v)%7;return Ve(o,j)}class Cs extends x{priority=90;parse(e,t,s){switch(t){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,i){return e=Re(e,s,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Ds extends x{priority=90;parse(e,t,s,i){const o=d=>{const m=Math.floor((d-1)/7)*7;return(d+i.weekStartsOn+6)%7+m};switch(t){case"e":case"ee":return y(w(t.length,e),o);case"eo":return y(s.ordinalNumber(e,{unit:"day"}),o);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,i){return e=Re(e,s,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Rs extends x{priority=90;parse(e,t,s,i){const o=d=>{const m=Math.floor((d-1)/7)*7;return(d+i.weekStartsOn+6)%7+m};switch(t){case"c":case"cc":return y(w(t.length,e),o);case"co":return y(s.ordinalNumber(e,{unit:"day"}),o);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,i){return e=Re(e,s,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function ks(a,e){const t=ee(a),s=as(t),i=e-s;return Ve(t,i)}class As extends x{priority=90;parse(e,t,s){const i=o=>o===0?7:o;switch(t){case"i":case"ii":return w(t.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return y(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return y(s.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return y(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return y(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,s){return e=ks(e,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Es extends x{priority=80;parse(e,t,s){switch(t){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(De(s),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Ps extends x{priority=80;parse(e,t,s){switch(t){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(De(s),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Ms extends x{priority=80;parse(e,t,s){switch(t){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(De(s),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Os extends x{priority=70;parse(e,t,s){switch(t){case"h":return g(b.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return w(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,s){const i=e.getHours()>=12;return i&&s<12?e.setHours(s+12,0,0,0):!i&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class _s extends x{priority=70;parse(e,t,s){switch(t){case"H":return g(b.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return w(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,s){return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Is extends x{priority=70;parse(e,t,s){switch(t){case"K":return g(b.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return w(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Ls extends x{priority=70;parse(e,t,s){switch(t){case"k":return g(b.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return w(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,s){const i=s<=24?s%24:s;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class qs extends x{priority=60;parse(e,t,s){switch(t){case"m":return g(b.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return w(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,s){return e.setMinutes(s,0,0),e}incompatibleTokens=["t","T"]}class Ys extends x{priority=50;parse(e,t,s){switch(t){case"s":return g(b.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return w(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,s){return e.setSeconds(s,0),e}incompatibleTokens=["t","T"]}class Bs extends x{priority=30;parse(e,t){const s=i=>Math.trunc(i*Math.pow(10,-t.length+3));return y(w(t.length,e),s)}set(e,t,s){return e.setMilliseconds(s),e}incompatibleTokens=["t","T"]}class Hs extends x{priority=10;parse(e,t){switch(t){case"X":return q(L.basicOptionalMinutes,e);case"XX":return q(L.basic,e);case"XXXX":return q(L.basicOptionalSeconds,e);case"XXXXX":return q(L.extendedOptionalSeconds,e);case"XXX":default:return q(L.extended,e)}}set(e,t,s){return t.timestampIsSet?e:E(e,e.getTime()-Se(e)-s)}incompatibleTokens=["t","T","x"]}class Fs extends x{priority=10;parse(e,t){switch(t){case"x":return q(L.basicOptionalMinutes,e);case"xx":return q(L.basic,e);case"xxxx":return q(L.basicOptionalSeconds,e);case"xxxxx":return q(L.extendedOptionalSeconds,e);case"xxx":default:return q(L.extended,e)}}set(e,t,s){return t.timestampIsSet?e:E(e,e.getTime()-Se(e)-s)}incompatibleTokens=["t","T","X"]}class $s extends x{priority=40;parse(e){return et(e)}set(e,t,s){return[E(e,s*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Gs extends x{priority=20;parse(e){return et(e)}set(e,t,s){return[E(e,s),{timestampIsSet:!0}]}incompatibleTokens="*"}const Qs={G:new cs,y:new ds,Y:new us,R:new ms,u:new fs,Q:new xs,q:new hs,M:new ps,L:new gs,w:new ws,I:new ys,d:new js,D:new Ts,E:new Cs,e:new Ds,c:new Rs,i:new As,a:new Es,b:new Ps,B:new Ms,h:new Os,H:new _s,K:new Is,k:new Ls,m:new qs,s:new Ys,S:new Bs,X:new Hs,x:new Fs,t:new $s,T:new Gs},zs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ws=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Us=/^'([^]*?)'?$/,Xs=/''/g,Ks=/\S/,Vs=/[a-zA-Z]/;function Z(a,e,t,s){const i=rs(),o=i.locale??kt,d=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,m=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,N={firstWeekContainsDate:d,weekStartsOn:m,locale:o},v=[new ls],j=e.match(Ws).map(c=>{const f=c[0];if(f in He){const T=He[f];return T(c,o.formatLong)}return c}).join("").match(zs),k=[];for(let c of j){At(c)&&Fe(c,e,a),Et(c)&&Fe(c,e,a);const f=c[0],T=Qs[f];if(T){const{incompatibleTokens:R}=T;if(Array.isArray(R)){const te=k.find(se=>R.includes(se.token)||se.token===f);if(te)throw new RangeError(`The format string mustn't contain \`${te.fullToken}\` and \`${c}\` at the same time`)}else if(T.incompatibleTokens==="*"&&k.length>0)throw new RangeError(`The format string mustn't contain \`${c}\` and any other token at the same time`);k.push({token:f,fullToken:c});const M=T.run(a,c,o.match,N);if(!M)return E(t,NaN);v.push(M.setter),a=M.rest}else{if(f.match(Vs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");if(c==="''"?c="'":f==="'"&&(c=Ss(c)),a.indexOf(c)===0)a=a.slice(c.length);else return E(t,NaN)}}if(a.length>0&&Ks.test(a))return E(t,NaN);const Y=v.map(c=>c.priority).sort((c,f)=>f-c).filter((c,f,T)=>T.indexOf(c)===f).map(c=>v.filter(f=>f.priority===c).sort((f,T)=>T.subPriority-f.subPriority)).map(c=>c[0]);let C=ee(t);if(isNaN(C.getTime()))return E(t,NaN);const I={};for(const c of Y){if(!c.validate(C,N))return E(t,NaN);const f=c.set(C,I,N);Array.isArray(f)?(C=f[0],Object.assign(I,f[1])):C=f}return E(t,C)}function Ss(a){return a.match(Us)[1].replace(Xs,"'")}var Zs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Js=Zs.reduce((a,e)=>{const t=Pt(`Primitive.${e}`),s=u.forwardRef((i,o)=>{const{asChild:d,...m}=i,N=d?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(N,{...m,ref:o})});return s.displayName=`Primitive.${e}`,{...a,[e]:s}},{}),er="Separator",Ue="horizontal",tr=["horizontal","vertical"],rt=u.forwardRef((a,e)=>{const{decorative:t,orientation:s=Ue,...i}=a,o=sr(s)?s:Ue,m=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return r.jsx(Js.div,{"data-orientation":o,...m,...i,ref:e})});rt.displayName=er;function sr(a){return tr.includes(a)}var at=rt;const J=u.forwardRef(({className:a,orientation:e="horizontal",decorative:t=!0,...s},i)=>r.jsx(at,{ref:i,decorative:t,orientation:e,className:H("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...s}));J.displayName=at.displayName;function rr(a,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(a?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}var ar=Mt[" useInsertionEffect ".trim().toString()]||Ze;function nr({prop:a,defaultProp:e,onChange:t=()=>{},caller:s}){const[i,o,d]=ir({defaultProp:e,onChange:t}),m=a!==void 0,N=m?a:i;{const j=u.useRef(a!==void 0);u.useEffect(()=>{const k=j.current;k!==m&&console.warn(`${s} is changing from ${k?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),j.current=m},[m,s])}const v=u.useCallback(j=>{if(m){const k=or(j)?j(a):j;k!==a&&d.current?.(k)}else o(j)},[m,a,o,d]);return[N,v]}function ir({defaultProp:a,onChange:e}){const[t,s]=u.useState(a),i=u.useRef(t),o=u.useRef(e);return ar(()=>{o.current=e},[e]),u.useEffect(()=>{i.current!==t&&(o.current?.(t),i.current=t)},[t,i]),[t,s,o]}function or(a){return typeof a=="function"}var ue="Collapsible",[lr]=Ot(ue),[cr,ke]=lr(ue),nt=u.forwardRef((a,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:i,disabled:o,onOpenChange:d,...m}=a,[N,v]=nr({prop:s,defaultProp:i??!1,onChange:d,caller:ue});return r.jsx(cr,{scope:t,disabled:o,contentId:_t(),open:N,onOpenToggle:u.useCallback(()=>v(j=>!j),[v]),children:r.jsx(Ce.div,{"data-state":Ee(N),"data-disabled":o?"":void 0,...m,ref:e})})});nt.displayName=ue;var it="CollapsibleTrigger",ot=u.forwardRef((a,e)=>{const{__scopeCollapsible:t,...s}=a,i=ke(it,t);return r.jsx(Ce.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Ee(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:e,onClick:rr(a.onClick,i.onOpenToggle)})});ot.displayName=it;var Ae="CollapsibleContent",lt=u.forwardRef((a,e)=>{const{forceMount:t,...s}=a,i=ke(Ae,a.__scopeCollapsible);return r.jsx(It,{present:t||i.open,children:({present:o})=>r.jsx(dr,{...s,ref:e,present:o})})});lt.displayName=Ae;var dr=u.forwardRef((a,e)=>{const{__scopeCollapsible:t,present:s,children:i,...o}=a,d=ke(Ae,t),[m,N]=u.useState(s),v=u.useRef(null),j=Lt(e,v),k=u.useRef(0),Y=k.current,C=u.useRef(0),I=C.current,c=d.open||m,f=u.useRef(c),T=u.useRef(void 0);return u.useEffect(()=>{const R=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(R)},[]),Ze(()=>{const R=v.current;if(R){T.current=T.current||{transitionDuration:R.style.transitionDuration,animationName:R.style.animationName},R.style.transitionDuration="0s",R.style.animationName="none";const M=R.getBoundingClientRect();k.current=M.height,C.current=M.width,f.current||(R.style.transitionDuration=T.current.transitionDuration,R.style.animationName=T.current.animationName),N(s)}},[d.open,s]),r.jsx(Ce.div,{"data-state":Ee(d.open),"data-disabled":d.disabled?"":void 0,id:d.contentId,hidden:!c,...o,ref:j,style:{"--radix-collapsible-content-height":Y?`${Y}px`:void 0,"--radix-collapsible-content-width":I?`${I}px`:void 0,...a.style},children:c&&i})});function Ee(a){return a?"open":"closed"}var ur=nt;const mr=ur,fr=ot,xr=lt,ce=[{id:"A32CFM Boro",label:"Borescope A320 CFM",reqAircraft:"A320 CF",excludes:["Boro ALL"]},{id:"A32PW Boro",label:"Borescope A320 PW",reqAircraft:"A320 NEO",excludes:["Boro ALL"]},{id:"A330RR Boro",label:"Borescope A330 RR",reqAircraft:"A330 RR",excludes:["Boro ALL"]},{id:"A340 Boro",label:"Borescope A340",reqAircraft:"A343",excludes:["Boro ALL"]},{id:"A350 Boro",label:"Borescope A350",reqAircraft:"A350",excludes:["Boro ALL"]},{id:"A220 Boro",label:"Borescope A220",reqAircraft:"A220",excludes:["Boro ALL"]},{id:"B777 Boro",label:"Borescope B777",reqAircraft:"B777",excludes:["Boro ALL"]},{id:"A220 RU",label:"Run Up A220",reqAircraft:"A220"},{id:"A320 RU",label:"Run Up A320",reqAircraft:"A320 CF",excludes:["32S RU"]},{id:"A320NEO RU",label:"Run Up A320 NEO",reqAircraft:"A320 NEO",excludes:["32 RU PW"]},{id:"A330 RU",label:"Run Up A330",reqAircraft:"A330 RR"},{id:"A343 RU",label:"Run Up A343",reqAircraft:"A343",excludes:["343 RU"]},{id:"A350 RU",label:"Run Up A350",reqAircraft:"A350",excludes:["A350 RU"]},{id:"B777 RU",label:"Run Up B777",reqAircraft:"B777",excludes:["777 RU"]},{id:"FUEL TANK",label:"Fuel Tank Safety",reqAircraft:null,excludes:["FUEL TANK"]},{id:"Walliclean",label:"Walliclean",reqAircraft:null},{id:"Forklift",label:"Forklift",reqAircraft:null},{id:"CYCLEAN",label:"Cyclean",reqAircraft:null,excludes:["CS RU","CYCLEAN"]},{id:"Cobra",label:"Cobra",reqAircraft:null},{id:"Cee Bee",label:"Cee Bee",reqAircraft:null,excludes:["Cee Bee"]},{id:"OXY Hand",label:"Oxygen Handling",reqAircraft:null,excludes:["OXY Hand"]},{id:"ENTRY",label:"Entry/Confined Space",reqAircraft:null,excludes:["ENTRY"]}],je={LA:{type:"vacation",label:"Annual Leave"},LD:{type:"vacation",label:"Day Off"},K:{type:"sick",label:"Sick Leave"},ED:{type:"training",label:"Education/Training"},CO:{type:"comp",label:"Comp Day"},MI:{type:"other",label:"Military"},Fe:{type:"other",label:"Holiday"},KK:{type:"sick",label:"Child Sick"}},ct="aerostaff_trainings",hr=()=>{try{const a=localStorage.getItem(ct);return a?JSON.parse(a):[]}catch{return[]}},pr=a=>{localStorage.setItem(ct,JSON.stringify(a))};function Dr(){const{employees:a,assignments:e,getAssignment:t}=qt(),[s,i]=u.useState(hr),[o,d]=u.useState(null),[m,N]=u.useState(!1),[v,j]=u.useState(!1),[k,Y]=u.useState(""),[C,I]=u.useState([]),[c,f]=u.useState([]),[T,R]=u.useState(""),[M,te]=u.useState(""),[se,Pe]=u.useState("saved"),[B,Me]=u.useState(""),[U,re]=u.useState([]),X=u.useMemo(()=>{if(!B)return[];const n=ce.find(l=>l.id===B);return n?a.filter(l=>l.certifications.includes(n.id)||n.excludes&&n.excludes.some(h=>l.certifications.includes(h))?!1:n.reqAircraft?l.skills.some(D=>Yt(D.aircraftType,n.reqAircraft)&&(D.license==="B1"||D.license==="B1/2")):!0):[]},[a,B]),Oe=n=>{re(l=>l.includes(n)?l.filter(h=>h!==n):[...l,n])},dt=()=>{const n=ce.find(h=>h.id===B);if(!n)return;const l={id:`training_${Date.now()}`,name:`${n.label} Training`,dateRanges:[{id:`range_${Date.now()}`,startDate:"",endDate:""}],selectedEmployees:U,createdAt:new Date().toISOString()};K([...s,l]),d(l),me(l),Pe("saved"),Me(""),re([])},K=n=>{i(n),pr(n)},ut=()=>{const n={id:`training_${Date.now()}`,name:"New Training",dateRanges:[{id:`range_${Date.now()}`,startDate:"",endDate:""}],selectedEmployees:[],createdAt:new Date().toISOString()};K([...s,n]),d(n),me(n)},me=n=>{Y(n.name),I([...n.dateRanges]),f([...n.selectedEmployees]),R(n.maxGroupSize?.toString()||""),N(!0),j(!1)},mt=()=>{N(!1),o?.name==="New Training"&&o.dateRanges[0]?.startDate===""&&(K(s.filter(n=>n.id!==o.id)),d(null))},ft=()=>{if(!o)return;const n={...o,name:k,dateRanges:C.filter(l=>l.startDate&&l.endDate),selectedEmployees:c,maxGroupSize:T?parseInt(T):void 0};K(s.map(l=>l.id===n.id?n:l)),d(n),N(!1)},xt=n=>{K(s.filter(l=>l.id!==n)),o?.id===n&&(d(null),N(!1))},ht=()=>{I([...C,{id:`range_${Date.now()}`,startDate:"",endDate:""}])},pt=n=>{I(C.filter(l=>l.id!==n))},_e=(n,l,h)=>{I(C.map(D=>D.id===n?{...D,[l]:h}:D))},Ie=n=>{c.includes(n)?f(c.filter(l=>l!==n)):f([...c,n])},gt=()=>{f(a.map(n=>n.id))},wt=()=>{f([])},bt=u.useMemo(()=>{if(!M)return a;const n=M.toLowerCase();return a.filter(l=>l.name.toLowerCase().includes(n)||l.initials.toLowerCase().includes(n))},[a,M]),yt=()=>{if(!o)return[];const n=[];return o.dateRanges.forEach(l=>{if(!l.startDate||!l.endDate)return;let h,D;try{h=Z(l.startDate,"yyyy-MM-dd",new Date),D=Z(l.endDate,"yyyy-MM-dd",new Date)}catch{return}const p=$t({start:h,end:D});o.selectedEmployees.forEach(P=>{const O=a.find($=>$.id===P);if(!O)return;const F=[];p.forEach($=>{const ne=Q($,"yyyy-MM-dd"),G=t(ne,P);G&&je[G]&&F.push({date:ne,type:je[G].type,code:G})});let he=null;const ae=[];p.forEach($=>{const ne=Q($,"yyyy-MM-dd"),G=a.filter(z=>{const Nt=t(ne,z.id);return Gt(Nt||"-")}),Ye=G.filter(z=>z.role==="SrEng"||z.role==="PM").length,Be=G.filter(z=>z.role==="PS").length;(O.role==="SrEng"||O.role==="PM")&&Ye<=6?ae.push(`${Q($,"dd.MM")}: Would leave Senior staff below min (6), currently ${Ye}`):O.role==="PS"&&Be<=2&&ae.push(`${Q($,"dd.MM")}: Would leave PS below min (2), currently ${Be}`)}),ae.length>0&&(he=ae.join(`
`));let pe="available";F.length>0?pe="conflict":he&&(pe="staffing_issue"),n.push({employeeId:P,employeeName:O.name,dateRangeId:l.id,status:pe,conflicts:F,staffingImpact:he})})}),n},fe=u.useMemo(()=>!v||!o?[]:yt(),[v,o,a,e]),Le=n=>{const l=fe.filter(P=>P.dateRangeId===n),h=l.filter(P=>P.status==="available").length,D=l.filter(P=>P.status==="conflict").length,p=l.filter(P=>P.status==="staffing_issue").length;return{available:h,conflicts:D,staffing:p,total:l.length}},qe=()=>{if(!o||o.dateRanges.length===0)return null;let n=null,l=-1;return o.dateRanges.forEach(h=>{const D=Le(h.id);D.available>l&&(l=D.available,n=h)}),n},xe=n=>{if(!n.startDate||!n.endDate)return"Not set";try{const l=Z(n.startDate,"yyyy-MM-dd",new Date),h=Z(n.endDate,"yyyy-MM-dd",new Date);return`${Q(l,"dd.MM.yyyy")} - ${Q(h,"dd.MM.yyyy")}`}catch{return"Invalid dates"}};return r.jsxs("div",{className:"space-y-6","data-testid":"training-page",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[r.jsx(ge,{className:"h-8 w-8 text-primary"}),"Training Availability"]}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Check employee availability for training courses"})]})}),r.jsxs(zt,{value:se,onValueChange:Pe,className:"w-full",children:[r.jsxs(Wt,{className:"mb-4 bg-muted/50 p-1",children:[r.jsxs(ze,{value:"saved",className:"px-6 flex items-center gap-2",children:[r.jsx($e,{className:"h-4 w-4"}),"Saved Trainings"]}),r.jsxs(ze,{value:"planner",className:"px-6 flex items-center gap-2",children:[r.jsx(Ne,{className:"h-4 w-4"}),"Training Planner"]})]}),r.jsx(We,{value:"saved",className:"mt-0",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"lg:col-span-4",children:r.jsxs(W,{children:[r.jsx(ie,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(oe,{className:"text-lg",children:"Saved Trainings"}),r.jsxs(A,{size:"sm",onClick:ut,"data-testid":"button-new-training",children:[r.jsx(be,{className:"h-4 w-4 mr-1"}),"New"]})]})}),r.jsx(le,{children:r.jsx(ye,{className:"h-[500px]",children:s.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(ge,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No trainings saved yet"}),r.jsx("p",{className:"text-sm",children:'Click "New" to create one'})]}):r.jsx("div",{className:"space-y-2",children:s.map(n=>r.jsx("div",{onClick:()=>{d(n),N(!1),j(!1)},className:H("p-3 rounded-lg border cursor-pointer transition-colors",o?.id===n.id?"bg-primary/10 border-primary":"hover:bg-muted/50 border-transparent"),"data-testid":`training-item-${n.id}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:n.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.selectedEmployees.length," employees · ",n.dateRanges.length," date option(s)"]})]}),r.jsx(Bt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]})},n.id))})})})]})}),r.jsx("div",{className:"lg:col-span-8",children:o?r.jsxs(W,{children:[r.jsx(ie,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[m?r.jsx(V,{value:k,onChange:n=>Y(n.target.value),className:"text-xl font-semibold max-w-md",placeholder:"Training name","data-testid":"input-training-name"}):r.jsx(oe,{className:"text-xl",children:o.name}),r.jsx("div",{className:"flex items-center gap-2",children:m?r.jsxs(r.Fragment,{children:[r.jsxs(A,{variant:"outline",size:"sm",onClick:mt,children:[r.jsx(Ge,{className:"h-4 w-4 mr-1"}),"Cancel"]}),r.jsxs(A,{size:"sm",onClick:ft,"data-testid":"button-save-training",children:[r.jsx(ss,{className:"h-4 w-4 mr-1"}),"Save"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(A,{variant:"outline",size:"sm",onClick:()=>me(o),children:[r.jsx(Zt,{className:"h-4 w-4 mr-1"}),"Edit"]}),r.jsxs(A,{variant:"destructive",size:"sm",onClick:()=>xt(o.id),children:[r.jsx(Qt,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]})}),r.jsxs(le,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs(S,{className:"text-base font-semibold flex items-center gap-2 mb-3",children:[r.jsx($e,{className:"h-4 w-4"}),"Date Options"]}),m?r.jsxs("div",{className:"space-y-3",children:[C.map((n,l)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-sm text-muted-foreground w-16",children:["Option ",l+1]}),r.jsx(V,{type:"date",value:n.startDate,onChange:h=>_e(n.id,"startDate",h.target.value),className:"w-40"}),r.jsx("span",{className:"text-muted-foreground",children:"to"}),r.jsx(V,{type:"date",value:n.endDate,onChange:h=>_e(n.id,"endDate",h.target.value),className:"w-40"}),C.length>1&&r.jsx(A,{variant:"ghost",size:"icon",onClick:()=>pt(n.id),children:r.jsx(Ge,{className:"h-4 w-4"})})]},n.id)),r.jsxs(A,{variant:"outline",size:"sm",onClick:ht,children:[r.jsx(be,{className:"h-4 w-4 mr-1"}),"Add Date Option"]})]}):r.jsx("div",{className:"flex flex-wrap gap-2",children:o.dateRanges.map((n,l)=>r.jsxs(_,{variant:"secondary",className:"text-sm py-1 px-3",children:["Option ",l+1,": ",xe(n)]},n.id))})]}),r.jsx(J,{}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs(S,{className:"text-base font-semibold flex items-center gap-2",children:[r.jsx(we,{className:"h-4 w-4"}),"Employees (",m?c.length:o.selectedEmployees.length,")"]}),m&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(V,{placeholder:"Search...",value:M,onChange:n=>te(n.target.value),className:"w-40 h-8"}),r.jsx(A,{variant:"outline",size:"sm",onClick:gt,children:"Select All"}),r.jsx(A,{variant:"outline",size:"sm",onClick:wt,children:"Clear"})]})]}),m?r.jsx(ye,{className:"h-48 border rounded-lg p-3",children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:bt.map(n=>r.jsxs("div",{className:H("flex items-center gap-2 p-2 rounded cursor-pointer transition-colors",c.includes(n.id)?"bg-primary/10":"hover:bg-muted/50"),onClick:()=>Ie(n.id),children:[r.jsx(Qe,{checked:c.includes(n.id),onCheckedChange:()=>Ie(n.id)}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:n.name}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.initials," · ",n.role]})]})]},n.id))})}):r.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.selectedEmployees.slice(0,10).map(n=>{const l=a.find(h=>h.id===n);return l?r.jsx(_,{variant:"outline",className:"text-xs",children:l.name},n):null}),o.selectedEmployees.length>10&&r.jsxs(_,{variant:"outline",className:"text-xs",children:["+",o.selectedEmployees.length-10," more"]})]})]}),m&&r.jsxs(r.Fragment,{children:[r.jsx(J,{}),r.jsxs("div",{children:[r.jsx(S,{className:"text-base font-semibold mb-3 block",children:"Max Group Size (optional)"}),r.jsx(V,{type:"number",value:T,onChange:n=>R(n.target.value),placeholder:"No limit",className:"w-40"})]})]}),!m&&o.selectedEmployees.length>0&&o.dateRanges.some(n=>n.startDate&&n.endDate)&&r.jsxs(r.Fragment,{children:[r.jsx(J,{}),r.jsx("div",{className:"flex justify-center",children:r.jsxs(A,{size:"lg",onClick:()=>j(!0),className:"px-8","data-testid":"button-check-availability",children:[r.jsx(ve,{className:"h-5 w-5 mr-2"}),"Check Availability"]})})]}),v&&fe.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(J,{}),r.jsxs("div",{children:[r.jsx(S,{className:"text-base font-semibold mb-3 block",children:"Availability Results"}),qe()&&o.dateRanges.length>1&&r.jsx("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:r.jsxs("p",{className:"text-sm font-medium text-green-600 dark:text-green-400 flex items-center gap-2",children:[r.jsx(ve,{className:"h-4 w-4"}),"Recommended: ",xe(qe())]})}),o.dateRanges.map((n,l)=>{const h=Le(n.id),D=fe.filter(p=>p.dateRangeId===n.id);return r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Option ",l+1,": ",xe(n)]}),r.jsxs(_,{variant:"secondary",className:"bg-green-500/20 text-green-600",children:[h.available," available"]}),h.conflicts>0&&r.jsxs(_,{variant:"secondary",className:"bg-yellow-500/20 text-yellow-600",children:[h.conflicts," conflicts"]}),h.staffing>0&&r.jsxs(_,{variant:"secondary",className:"bg-red-500/20 text-red-600",children:[h.staffing," staffing issues"]})]}),r.jsx("div",{className:"space-y-2",children:D.map(p=>p.conflicts.length>0||p.staffingImpact?r.jsxs(mr,{children:[r.jsx(fr,{className:"w-full",children:r.jsx("div",{className:H("p-3 rounded border cursor-pointer transition-colors",p.status==="conflict"&&"bg-yellow-500/10 border-yellow-500/30 hover:bg-yellow-500/20",p.status==="staffing_issue"&&"bg-red-500/10 border-red-500/30 hover:bg-red-500/20"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[p.status==="conflict"&&r.jsx(Ht,{className:"h-4 w-4 text-yellow-500"}),p.status==="staffing_issue"&&r.jsx(es,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"text-sm font-medium",children:p.employeeName}),r.jsx(_,{variant:"secondary",className:H("ml-auto text-xs",p.status==="conflict"&&"bg-yellow-500/20 text-yellow-600",p.status==="staffing_issue"&&"bg-red-500/20 text-red-600"),children:p.status==="conflict"?"Has Conflicts":"Staffing Issue"}),r.jsx(Ft,{className:"h-4 w-4 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]})})}),r.jsx(xr,{children:r.jsxs("div",{className:H("mt-1 p-3 rounded border-l-4 ml-4",p.status==="conflict"&&"bg-yellow-500/5 border-yellow-500",p.status==="staffing_issue"&&"bg-red-500/5 border-red-500"),children:[p.conflicts.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("p",{className:"font-medium text-sm text-yellow-600 dark:text-yellow-400 mb-1",children:"Conflicts:"}),p.conflicts.map((O,F)=>r.jsxs("p",{className:"text-sm pl-2",children:["• ",Q(Z(O.date,"yyyy-MM-dd",new Date),"dd.MM.yyyy"),": ",r.jsx("span",{className:"font-medium",children:je[O.code]?.label||O.code})]},F))]}),p.staffingImpact&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-red-600 dark:text-red-400 mb-1",children:"Staffing Issues:"}),p.staffingImpact.split(`
`).map((O,F)=>r.jsxs("p",{className:"text-sm pl-2",children:["• ",O]},F))]})]})})]},`${p.employeeId}-${p.dateRangeId}`):r.jsx("div",{className:H("p-3 rounded border",p.status==="available"&&"bg-green-500/10 border-green-500/30"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ve,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:p.employeeName}),r.jsx(_,{variant:"secondary",className:"ml-auto text-xs bg-green-500/20 text-green-600",children:"Available"})]})},`${p.employeeId}-${p.dateRangeId}`))})]},n.id)})]})]})]})]}):r.jsx(W,{className:"h-[570px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(ge,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),r.jsx("p",{className:"text-lg",children:"Select a training or create a new one"})]})})})]})}),r.jsx(We,{value:"planner",className:"mt-0",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"lg:col-span-4",children:r.jsxs(W,{children:[r.jsx(ie,{children:r.jsx(oe,{children:"Training Goal"})}),r.jsxs(le,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(S,{children:"Select Training Type"}),r.jsxs(Ut,{value:B,onValueChange:Me,children:[r.jsx(Xt,{children:r.jsx(Kt,{placeholder:"Select a training type..."})}),r.jsx(Vt,{children:ce.map(n=>r.jsx(St,{value:n.id,children:n.label},n.id))})]})]}),B&&(()=>{const n=ce.find(l=>l.id===B);return r.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2 text-sm",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(Ne,{className:"h-4 w-4 text-primary"}),"Candidate Logic"]}),r.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-muted-foreground",children:[n?.reqAircraft?r.jsxs("li",{children:[r.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Include:"})," Holds B1/B1-2 License for ",n.reqAircraft]}):r.jsxs("li",{children:[r.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Include:"})," All Staff (General Training)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"Exclude:"})," Already holds ",n?.label]})]})]})})()]})]})}),r.jsx("div",{className:"lg:col-span-8",children:B?r.jsxs(W,{className:"h-full",children:[r.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsxs(oe,{className:"text-lg flex items-center gap-2",children:[r.jsx(we,{className:"h-5 w-5"}),"Eligible Candidates (",X.length,")"]}),r.jsxs(A,{onClick:dt,disabled:U.length===0,className:"gap-2",children:[r.jsx(be,{className:"h-4 w-4"}),"Create Training (",U.length,")"]})]}),r.jsxs(le,{children:[r.jsx(ye,{className:"h-[500px] border rounded-lg p-4",children:X.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(we,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),r.jsx("p",{children:"No eligible candidates found for this training."}),r.jsx("p",{className:"text-sm mt-1",children:"Everyone eligible might already have this certification."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:X.map(n=>r.jsxs("div",{className:H("flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all",U.includes(n.id)?"bg-primary/5 border-primary shadow-sm":"hover:bg-muted/50 border-border"),onClick:()=>Oe(n.id),children:[r.jsx(Qe,{checked:U.includes(n.id),onCheckedChange:()=>Oe(n.id),className:"mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:n.name}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[r.jsx(_,{variant:"outline",className:"text-[10px] h-5 px-1.5",children:n.role}),r.jsx(_,{variant:"outline",className:"text-[10px] h-5 px-1.5",children:n.initials}),n.department&&r.jsx(_,{variant:"secondary",className:"text-[10px] h-5 px-1.5",children:n.department.replace("S/","")})]})]})]},n.id))})}),r.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-muted-foreground",children:[r.jsx("span",{children:"Select candidates to start planning a training session."}),X.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(A,{variant:"ghost",size:"sm",onClick:()=>re(X.map(n=>n.id)),children:"Select All"}),r.jsx(A,{variant:"ghost",size:"sm",onClick:()=>re([]),children:"Clear"})]})]})]})]}):r.jsx(W,{className:"h-full flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center text-muted-foreground max-w-sm mx-auto p-6",children:[r.jsx(Ne,{className:"h-16 w-16 mx-auto mb-4 opacity-20"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select a Training Goal"}),r.jsx("p",{children:"Choose a training type from the left to find eligible employees who need this certification."})]})})})]})})]})]})}export{Dr as TrainingPage,Dr as default};
